<!Doctype html> <html xmlns=http://www.w3.org/1999/xhtml> <head> <meta charset="UTF-8"> <title>Ruby å¼‚å¸¸ | w3cschoolèœé¸Ÿæ•™ç¨‹</title> <link rel='prev' title='Ruby Dir ç±»å’Œæ–¹æ³•' href="ruby-dir-methods.html"/> <link rel='next' title='HTML DOM Map å¯¹è±¡' href="/jsref/dom-obj-map.html"/> <link rel='canonical' href='http://www.w3cschool.cc/ruby/ruby-exceptions.html'/> <meta name="keywords" content="Ruby å¼‚å¸¸"> <meta name="description" content="Ruby å¼‚å¸¸ å¼‚å¸¸å’Œæ‰§è¡Œæ€»æ˜¯è¢«è”ç³»åœ¨ä¸€èµ·ã€‚å¦‚æœæ‚¨æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸”æ²¡æœ‰æ°å½“åœ°å¤„ç†è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆæ‚¨çš„ç¨‹åºåˆ™è¢«è®¤ä¸ºæ˜¯ä½è´¨é‡çš„ã€‚ å¦‚æœå¼‚å¸¸å‘ç”Ÿï¼Œåˆ™ç¨‹åºåœæ­¢ã€‚å¼‚å¸¸ç”¨äºå¤„ç†å„ç§ç±»å‹çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯å¯èƒ½åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´å‘ç”Ÿï¼Œæ‰€ä»¥è¦é‡‡å–é€‚å½“çš„è¡ŒåŠ¨ï¼Œè€Œä¸è‡³äºè®©ç¨‹åºå®Œå…¨åœæ­¢ã€‚ Ruby æä¾›äº†ä¸€ä¸ªå®Œç¾çš„å¤„ç†å¼‚å¸¸çš„æœºåˆ¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ begin/end å—ä¸­é™„ä¸Šå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨ rescue å­å¥å‘Šè¯‰ Ruby å®Œç¾è¦å¤„ç†çš„å¼‚å¸¸ç±»å‹ã€‚ .."> <!--[if lt IE 7]> <style> #leftcolumn{margin-left:0} </style> <![endif]--> <link rel="shortcut icon" href="../favicon.ico" tppabs="http://www.w3cschool.cc/favicon.ico" mce_href="/favicon.ico" type="image/x-icon"> <script src="../../libs.baidu.com/jquery/1.8.1/jquery.min.js" tppabs="http://libs.baidu.com/jquery/1.8.1/jquery.min.js"></script> <link rel="stylesheet" type="text/css" href="../wp-content/themes/w3cschool.cc/assets/css/stdtheme.css-1.04.css" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/css/stdtheme.css?1.04"> </head> <body> <div id="top"> <div style="height:78px;"> <div id="topLogo"> <a id="top"></a> <a href="../index.htm" tppabs="http://www.w3cschool.cc/" title="w3cschoolèœé¸Ÿæ•™ç¨‹"><img width="336" height="69" src="../wp-content/themes/w3cschool.cc/assets/img/logo.png" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/logo.png" alt="W3CSchool.cc" style="border:0;margin-top:5px;"/></a> </div> <div id="searchTranslate"> <div id="searchText">Search w3cschool.cc:</div> <div id="googleSearch"> <form name="cse" id="searchbox_demo" action="http://wen.lu/search" target="_blank"> <input type="hidden" name="cref"/> <input type="hidden" name="ie" value="utf-8"/> <input type="hidden" name="hl"/> <input type="hidden" name="sitesearch" value="w3cschool.cc"> <input name="as_q" type="text" size="20"/> <input type="submit" name="sa" value="æœç´¢"/> </form> </div> </div> </div> <div id="topnav"> <div id="topnavTut"> <a href="../index.htm" tppabs="http://www.w3cschool.cc/">é¦–é¡µ</a> <a href="../html/html-tutorial.html" tppabs="http://www.w3cschool.cc/html/html-tutorial.html">HTML</a> <a href="../css/css-tutorial.html" tppabs="http://www.w3cschool.cc/css/css-tutorial.html">CSS</a> <a href="../js/js-tutorial.html" tppabs="http://www.w3cschool.cc/js/js-tutorial.html">JavaScript</a> <a href="../jquery/jquery-tutorial.html" tppabs="http://www.w3cschool.cc/jquery/jquery-tutorial.html">jQuery</a> <a href="../jqueryui/jqueryui-tutorial.html" tppabs="http://www.w3cschool.cc/jqueryui/jqueryui-tutorial.html">jQueryUI</a> <a href="../bootstrap/bootstrap-tutorial.html" tppabs="http://www.w3cschool.cc/bootstrap/bootstrap-tutorial.html">Bootstrap</a> <a href="../jquerymobile/jquerymobile-tutorial.html" tppabs="http://www.w3cschool.cc/jquerymobile/jquerymobile-tutorial.html">jMobile</a> <a href="../jeasyui/jqueryeasyui-tutorial.html" tppabs="http://www.w3cschool.cc/jeasyui/jqueryeasyui-tutorial.html">EasyUI</a> <a href="../xml/xml-tutorial.html" tppabs="http://www.w3cschool.cc/xml/xml-tutorial.html">XML</a> <a href="../sql/sql-tutorial.html" tppabs="http://www.w3cschool.cc/sql/sql-tutorial.html">SQL</a> <a href="../mysql/mysql-tutorial.html" tppabs="http://www.w3cschool.cc/mysql/mysql-tutorial.html">MySQL</a> <a href="../sqlite/sqlite-tutorial.html" tppabs="http://www.w3cschool.cc/sqlite/sqlite-tutorial.html">SQLite</a> <a href="../php/php-tutorial.html" tppabs="http://www.w3cschool.cc/php/php-tutorial.html">PHP</a> <a href="../csharp/csharp-tutorial.html" tppabs="http://www.w3cschool.cc/csharp/csharp-tutorial.html">C#</a> <a href="../python/python-tutorial.html" tppabs="http://www.w3cschool.cc/python/python-tutorial.html">Python</a> <a href="../java/java-tutorial.html" tppabs="http://www.w3cschool.cc/java/java-tutorial.html">Java</a> <a href="../jsp/jsp-tutorial.html" tppabs="http://www.w3cschool.cc/jsp/jsp-tutorial.html">JSP</a> <a href="ruby-tutorial.html" tppabs="http://www.w3cschool.cc/ruby/ruby-tutorial.html">Ruby</a> <a href="../css-radius.htm" tppabs="http://www.w3cschool.cc/css-radius">å‰ç«¯å·¥å…·</a> <a href="../sitemap.htm" tppabs="http://www.w3cschool.cc/sitemap">æ›´å¤šâ€¦â€¦</a> </div> <div id="topnavAbout"> </div> </div> <div id="page"> <div style="clear:both;"></div> <div id="leftcolumn"> <h2 class="left"><strong>Ruby æ•™ç¨‹</strong></h2> <a target="_top" title="Ruby æ•™ç¨‹" href="ruby-tutorial.html" tppabs="http://www.w3cschool.cc/ruby/ruby-tutorial.html"> Ruby æ•™ç¨‹ </a> <a target="_top" title="Ruby ç®€ä»‹" href="ruby-intro.html" tppabs="http://www.w3cschool.cc/ruby/ruby-intro.html"> Ruby ç®€ä»‹ </a> <a target="_top" title="Ruby ç¯å¢ƒ" href="ruby-environment.html" tppabs="http://www.w3cschool.cc/ruby/ruby-environment.html"> Ruby ç¯å¢ƒ </a> <a target="_top" title="Ruby å®‰è£… &#8211; Unix" href="ruby-installation-unix.html" tppabs="http://www.w3cschool.cc/ruby/ruby-installation-unix.html"> Ruby å®‰è£… - Unix </a> <a target="_top" title="Ruby å®‰è£… &#8211; Windows" href="ruby-installation-windows.html" tppabs="http://www.w3cschool.cc/ruby/ruby-installation-windows.html"> Ruby å®‰è£… - Windows </a> <a target="_top" title="Ruby å‘½ä»¤è¡Œé€‰é¡¹" href="ruby-command-line-options.html" tppabs="http://www.w3cschool.cc/ruby/ruby-command-line-options.html"> Ruby å‘½ä»¤è¡Œé€‰é¡¹ </a> <a target="_top" title="Ruby ç¯å¢ƒå˜é‡" href="ruby-environment-variables.html" tppabs="http://www.w3cschool.cc/ruby/ruby-environment-variables.html"> Ruby ç¯å¢ƒå˜é‡ </a> <a target="_top" title="Ruby è¯­æ³•" href="ruby-syntax.html" tppabs="http://www.w3cschool.cc/ruby/ruby-syntax.html"> Ruby è¯­æ³• </a> <a target="_top" title="Ruby ç±»å’Œå¯¹è±¡" href="ruby-class.html" tppabs="http://www.w3cschool.cc/ruby/ruby-class.html"> Ruby ç±»å’Œå¯¹è±¡ </a> <a target="_top" title="Ruby ç±»æ¡ˆä¾‹" href="ruby-class-case-study.html" tppabs="http://www.w3cschool.cc/ruby/ruby-class-case-study.html"> Ruby ç±»æ¡ˆä¾‹ </a> <a target="_top" title="Ruby å˜é‡" href="ruby-variable.html" tppabs="http://www.w3cschool.cc/ruby/ruby-variable.html"> Ruby å˜é‡ </a> <a target="_top" title="Ruby è¿ç®—ç¬¦" href="ruby-operator.html" tppabs="http://www.w3cschool.cc/ruby/ruby-operator.html"> Ruby è¿ç®—ç¬¦ </a> <a target="_top" title="Ruby æ³¨é‡Š" href="ruby-comment.html" tppabs="http://www.w3cschool.cc/ruby/ruby-comment.html"> Ruby æ³¨é‡Š </a> <a target="_top" title="Ruby åˆ¤æ–­" href="ruby-decision.html" tppabs="http://www.w3cschool.cc/ruby/ruby-decision.html"> Ruby åˆ¤æ–­ </a> <a target="_top" title="Ruby å¾ªç¯" href="ruby-loop.html" tppabs="http://www.w3cschool.cc/ruby/ruby-loop.html"> Ruby å¾ªç¯ </a> <a target="_top" title="Ruby æ–¹æ³•" href="ruby-method.html" tppabs="http://www.w3cschool.cc/ruby/ruby-method.html"> Ruby æ–¹æ³• </a> <a target="_top" title="Ruby å—" href="ruby-block.html" tppabs="http://www.w3cschool.cc/ruby/ruby-block.html"> Ruby å— </a> <a target="_top" title="Ruby æ¨¡å—ï¼ˆModuleï¼‰" href="ruby-module.html" tppabs="http://www.w3cschool.cc/ruby/ruby-module.html"> Ruby æ¨¡å—ï¼ˆModuleï¼‰ </a> <a target="_top" title="Ruby å­—ç¬¦ä¸²ï¼ˆStringï¼‰" href="ruby-string.html" tppabs="http://www.w3cschool.cc/ruby/ruby-string.html"> Ruby å­—ç¬¦ä¸²ï¼ˆStringï¼‰ </a> <a target="_top" title="Ruby æ•°ç»„ï¼ˆArrayï¼‰" href="ruby-array.html" tppabs="http://www.w3cschool.cc/ruby/ruby-array.html"> Ruby æ•°ç»„ï¼ˆArrayï¼‰ </a> <a target="_top" title="Ruby å“ˆå¸Œï¼ˆHashï¼‰" href="ruby-hash.html" tppabs="http://www.w3cschool.cc/ruby/ruby-hash.html"> Ruby å“ˆå¸Œï¼ˆHashï¼‰ </a> <a target="_top" title="Ruby æ—¥æœŸ &#038; æ—¶é—´ï¼ˆDate &#038; Timeï¼‰" href="ruby-date-time.html" tppabs="http://www.w3cschool.cc/ruby/ruby-date-time.html"> Ruby æ—¥æœŸ & æ—¶é—´ </a> <a target="_top" title="Ruby èŒƒå›´ï¼ˆRangeï¼‰" href="ruby-range.html" tppabs="http://www.w3cschool.cc/ruby/ruby-range.html"> Ruby èŒƒå›´ï¼ˆRangeï¼‰ </a> <a target="_top" title="Ruby è¿­ä»£å™¨" href="ruby-iterators.html" tppabs="http://www.w3cschool.cc/ruby/ruby-iterators.html"> Ruby è¿­ä»£å™¨ </a> <a target="_top" title="Ruby æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º" href="ruby-input-output.html" tppabs="http://www.w3cschool.cc/ruby/ruby-input-output.html"> Ruby æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º </a> <a target="_top" title="Ruby File ç±»å’Œæ–¹æ³•" href="ruby-file-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-file-methods.html"> Ruby File ç±»å’Œæ–¹æ³• </a> <a target="_top" title="Ruby Dir ç±»å’Œæ–¹æ³•" href="ruby-dir-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-dir-methods.html"> Ruby Dir ç±»å’Œæ–¹æ³• </a> <a target="_top" title="Ruby å¼‚å¸¸" href="ruby-exceptions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-exceptions.html"> Ruby å¼‚å¸¸ </a> <br><h2 class="left"><span class="left_h2">Ruby</span> é«˜çº§æ•™ç¨‹</h2> <a target="_top" title="Ruby é¢å‘å¯¹è±¡" href="ruby-object-oriented.html" tppabs="http://www.w3cschool.cc/ruby/ruby-object-oriented.html"> Ruby é¢å‘å¯¹è±¡ </a> <a target="_top" title="Ruby æ­£åˆ™è¡¨è¾¾å¼" href="ruby-regular-expressions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-regular-expressions.html"> Ruby æ­£åˆ™è¡¨è¾¾å¼ </a> <a target="_top" title="Ruby æ•°æ®åº“è®¿é—® &#8211; DBI æ•™ç¨‹" href="ruby-database-access.html" tppabs="http://www.w3cschool.cc/ruby/ruby-database-access.html"> Ruby æ•°æ®åº“è®¿é—® - DBI æ•™ç¨‹ </a> <a target="_top" title="Ruby CGI ç¼–ç¨‹" href="ruby-cgi.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi.html"> Ruby CGI ç¼–ç¨‹ </a> <a target="_top" title="Ruby CGIæ–¹æ³•" href="ruby-cgi-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-methods.html"> Ruby CGIæ–¹æ³• </a> <a target="_top" title="Ruby CGI Cookies" href="ruby-cgi-cookies.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-cookies.html"> Ruby CGI Cookies </a> <a target="_top" title="Ruby CGI Sessions" href="ruby-cgi-sessions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-sessions.html"> Ruby CGI Sessions </a> <a target="_top" title="Ruby å‘é€é‚®ä»¶ &#8211; SMTP" href="ruby-sending-email.html" tppabs="http://www.w3cschool.cc/ruby/ruby-sending-email.html"> Ruby å‘é€é‚®ä»¶ - SMTP </a> <a target="_top" title="Ruby Socket ç¼–ç¨‹" href="ruby-socket-programming.html" tppabs="http://www.w3cschool.cc/ruby/ruby-socket-programming.html"> Ruby Socket ç¼–ç¨‹ </a> <a target="_top" title="Ruby XML, XSLT å’Œ XPath æ•™ç¨‹" href="ruby-xml-xslt-xpath.html" tppabs="http://www.w3cschool.cc/ruby/ruby-xml-xslt-xpath.html"> Ruby XML, XSLT å’Œ XPath æ•™ç¨‹ </a> <a target="_top" title="Ruby Web Services åº”ç”¨ &#8211; SOAP4R" href="ruby-web-services.html" tppabs="http://www.w3cschool.cc/ruby/ruby-web-services.html"> Ruby Web Services </a> <a target="_top" title="Ruby å¤šçº¿ç¨‹" href="ruby-multithreading.html" tppabs="http://www.w3cschool.cc/ruby/ruby-multithreading.html"> Ruby å¤šçº¿ç¨‹ </a> </div><div id="main"> <div id="mainLeaderboard"> <div style="width:728px;height:90px;float:right;"> <script async src="../../pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" tppabs="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-5751451760833794" data-ad-slot="2542143260"></ins> <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> </div> </div> <div class="chapter"> <div class="prev">&laquo; <a href="ruby-dir-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-dir-methods.html" rel="prev"> Ruby Dir ç±»å’Œæ–¹æ³•</a></div> <div class="next"><a href="ruby-object-oriented.html" tppabs="http://www.w3cschool.cc/ruby/ruby-object-oriented.html" rel="next">Ruby é¢å‘å¯¹è±¡</a> &raquo;</div> </div> <div id="content"> <h1>Ruby <span class="color_h1">å¼‚å¸¸</span></h1> <div class="tutintro"> <p>å¼‚å¸¸å’Œæ‰§è¡Œæ€»æ˜¯è¢«è”ç³»åœ¨ä¸€èµ·ã€‚å¦‚æœæ‚¨æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸”æ²¡æœ‰æ°å½“åœ°å¤„ç†è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆæ‚¨çš„ç¨‹åºåˆ™è¢«è®¤ä¸ºæ˜¯ä½è´¨é‡çš„ã€‚</p> <p>å¦‚æœå¼‚å¸¸å‘ç”Ÿï¼Œåˆ™ç¨‹åºåœæ­¢ã€‚å¼‚å¸¸ç”¨äºå¤„ç†å„ç§ç±»å‹çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯å¯èƒ½åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´å‘ç”Ÿï¼Œæ‰€ä»¥è¦é‡‡å–é€‚å½“çš„è¡ŒåŠ¨ï¼Œè€Œä¸è‡³äºè®©ç¨‹åºå®Œå…¨åœæ­¢ã€‚</p> <p>Ruby æä¾›äº†ä¸€ä¸ªå®Œç¾çš„å¤„ç†å¼‚å¸¸çš„æœºåˆ¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <i>begin/end</i> å—ä¸­é™„ä¸Šå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨ <i>rescue</i> å­å¥å‘Šè¯‰ Ruby å®Œç¾è¦å¤„ç†çš„å¼‚å¸¸ç±»å‹ã€‚</p> </div> <h2 class="tutheader">è¯­æ³•</h2> <pre class="prettyprint">
begin  
# -  
rescue OneTypeOfException  
# -  
rescue AnotherTypeOfException  
# -  
else  
# å…¶ä»–å¼‚å¸¸
ensure
# æ€»æ˜¯è¢«æ‰§è¡Œ
end
</pre> <p>ä» <i>begin</i> åˆ° <i>rescue</i> ä¸­çš„ä¸€åˆ‡æ˜¯å—ä¿æŠ¤çš„ã€‚å¦‚æœä»£ç å—æ‰§è¡ŒæœŸé—´å‘ç”Ÿäº†å¼‚å¸¸ï¼Œæ§åˆ¶ä¼šä¼ åˆ° <i>rescue</i> å’Œ <i>end</i> ä¹‹é—´çš„å—ã€‚</p> <p>å¯¹äº <i>begin</i> å—ä¸­çš„æ¯ä¸ª <i>rescue</i> å­å¥ï¼ŒRuby æŠŠæŠ›å‡ºçš„å¼‚å¸¸ä¸æ¯ä¸ªå‚æ•°è¿›è¡Œè½®æµæ¯”è¾ƒã€‚å¦‚æœ rescue å­å¥ä¸­å‘½åçš„å¼‚å¸¸ä¸å½“å‰æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ç›¸åŒï¼Œæˆ–è€…æ˜¯è¯¥å¼‚å¸¸çš„çˆ¶ç±»ï¼Œåˆ™åŒ¹é…æˆåŠŸã€‚</p> <p>å¦‚æœå¼‚å¸¸ä¸åŒ¹é…æ‰€æœ‰æŒ‡å®šçš„é”™è¯¯ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ‰€æœ‰çš„ <i>rescue</i> å­å¥åä½¿ç”¨ä¸€ä¸ª <i>else</i> å­å¥ã€‚</p> <h2 class="tutheader">å®ä¾‹</h2> <pre class="prettyprint tryit">
#!/usr/bin/ruby

begin
   file = open("/unexistant_file")
   if file
      puts "File opened successfully"
   end
rescue
      file = STDIN
end
print file, "==", STDIN, "\n"
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœã€‚æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œ<i>STDIN</i> å–ä»£äº† <i>file</i> ï¼Œå› ä¸º<i>æ‰“å¼€</i>å¤±è´¥ã€‚</p> <pre class="prettyprint">
#&lt;IO:0xb7d16f84&gt;==#&lt;IO:0xb7d16f84&gt;
</pre> <h2 class="tutheader">ä½¿ç”¨ <i>retry</i> è¯­å¥</h2> <p>æ‚¨å¯ä»¥ä½¿ç”¨ <i>rescue</i> å—æ•è·å¼‚å¸¸ï¼Œç„¶åä½¿ç”¨ <i>retry</i> è¯­å¥ä»å¼€å¤´å¼€å§‹æ‰§è¡Œ <i>begin</i> å—ã€‚</p> <h2>è¯­æ³•</h2> <pre class="prettyprint">
begin
    # è¿™æ®µä»£ç æŠ›å‡ºçš„å¼‚å¸¸å°†è¢«ä¸‹é¢çš„ rescue å­å¥æ•è·
rescue
    # è¿™ä¸ªå—å°†æ•è·æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸
    retry  # è¿™å°†æŠŠæ§åˆ¶ç§»åˆ° begin çš„å¼€å¤´
end
</pre> <h2>å®ä¾‹</h2> <pre class="prettyprint tryit">
#!/usr/bin/ruby

begin
   file = open("/unexistant_file")
   if file
      puts "File opened successfully"
   end
rescue
   fname = "existant_file"
   retry
end
</pre> <p>ä»¥ä¸‹æ˜¯å¤„ç†æµç¨‹ï¼š</p> <ul class="list"> <li>æ‰“å¼€æ—¶å‘ç”Ÿå¼‚å¸¸ã€‚</li> <li>è·³åˆ° rescueã€‚fname è¢«é‡æ–°èµ‹å€¼ã€‚</li> <li>é€šè¿‡ retry è·³åˆ° begin çš„å¼€å¤´ã€‚</li> <li>è¿™æ¬¡æ–‡ä»¶æˆåŠŸæ‰“å¼€ã€‚</li> <li>ç»§ç»­åŸºæœ¬çš„è¿‡ç¨‹ã€‚</li> </ul> <p><b>æ³¨æ„ï¼š</b>å¦‚æœè¢«é‡æ–°å‘½åçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæœ¬åŠ¿åŠ›ä»£ç ä¼šæ— é™å°è¯•ã€‚æ‰€ä»¥å¼‚å¸¸å¤„ç†æ—¶ï¼Œè°¨æ…ä½¿ç”¨ <i>retry</i>ã€‚</p> <h2 class="tutheader">ä½¿ç”¨ <i>raise</i> è¯­å¥</h2> <p>æ‚¨å¯ä»¥ä½¿ç”¨ <i>raise</i> è¯­å¥æŠ›å‡ºå¼‚å¸¸ã€‚ä¸‹é¢çš„æ–¹æ³•åœ¨è°ƒç”¨æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚å®ƒçš„ç¬¬äºŒä¸ªæ¶ˆæ¯å°†è¢«è¾“å‡ºã€‚</p> <h2>è¯­æ³•</h2> <pre class="prettyprint">
raise 

OR

raise "Error Message" 

OR

raise ExceptionType, "Error Message"

OR

raise ExceptionType, "Error Message" condition

</pre> <p>ç¬¬ä¸€ç§å½¢å¼ç®€å•åœ°é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸ï¼ˆå¦‚æœæ²¡æœ‰å½“å‰å¼‚å¸¸åˆ™æŠ›å‡ºä¸€ä¸ª RuntimeErrorï¼‰ã€‚è¿™ç”¨åœ¨ä¼ å…¥å¼‚å¸¸ä¹‹å‰éœ€è¦è§£é‡Šå¼‚å¸¸çš„å¼‚å¸¸å¤„ç†ç¨‹åºä¸­ã€‚</p> <p>ç¬¬äºŒç§å½¢å¼åˆ›å»ºä¸€ä¸ªæ–°çš„ <i>RuntimeError</i> å¼‚å¸¸ï¼Œè®¾ç½®å®ƒçš„æ¶ˆæ¯ä¸ºç»™å®šçš„å­—ç¬¦ä¸²ã€‚è¯¥å¼‚å¸¸ä¹‹åæŠ›å‡ºåˆ°è°ƒç”¨å †æ ˆã€‚</p> <p>ç¬¬ä¸‰ç§å½¢å¼ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°åˆ›å»ºä¸€ä¸ªå¼‚å¸¸ï¼Œç„¶åè®¾ç½®ç›¸å…³çš„æ¶ˆæ¯ä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p> <p>ç¬¬å››ç§å½¢å¼ä¸ç¬¬ä¸‰ç§å½¢å¼ç±»ä¼¼ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä»»ä½•é¢å¤–çš„æ¡ä»¶è¯­å¥ï¼ˆæ¯”å¦‚ <i>unless</i>ï¼‰æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</p> <h2>å®ä¾‹</h2> <pre class="prettyprint tryit">
#!/usr/bin/ruby

begin  
    puts 'I am before the raise.'  
    raise 'An error has occurred.'  
    puts 'I am after the raise.'  
rescue  
    puts 'I am rescued.'  
end  
puts 'I am after the begin block.'  
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
I am before the raise.  
I am rescued.  
I am after the begin block.  
</pre> <p>å¦ä¸€ä¸ªæ¼”ç¤º <i>raise</i> ç”¨æ³•çš„å®ä¾‹ï¼š</p> <pre class="prettyprint tryit">
#!/usr/bin/ruby

begin  
  raise 'A test exception.'  
rescue Exception =&gt; e  
  puts e.message  
  puts e.backtrace.inspect  
end  
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
A test exception.
["main.rb:4"]
</pre> <h2 class="tutheader">ä½¿ç”¨ <i>ensure</i> è¯­å¥</h2> <p>æœ‰æ—¶å€™ï¼Œæ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Œæ‚¨éœ€è¦ä¿è¯ä¸€äº›å¤„ç†åœ¨ä»£ç å—ç»“æŸæ—¶å®Œæˆã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½åœ¨è¿›å…¥æ—¶æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå½“æ‚¨é€€å‡ºå—æ—¶ï¼Œæ‚¨éœ€è¦ç¡®ä¿å…³é—­æ–‡ä»¶ã€‚</p> <p><i>ensure</i> å­å¥åšçš„å°±æ˜¯è¿™ä¸ªã€‚ensure æ”¾åœ¨æœ€åä¸€ä¸ª rescue å­å¥åï¼Œå¹¶åŒ…å«ä¸€ä¸ªå—ç»ˆæ­¢æ—¶æ€»æ˜¯æ‰§è¡Œçš„ä»£ç å—ã€‚å®ƒä¸å—æ˜¯å¦æ­£å¸¸é€€å‡ºã€æ˜¯å¦æŠ›å‡ºå¹¶å¤„ç†å¼‚å¸¸ã€æ˜¯å¦å› ä¸€ä¸ªæœªæ•è·çš„å¼‚å¸¸è€Œç»ˆæ­¢ï¼Œè¿™äº›éƒ½æ²¡å…³ç³»ï¼Œ<i>ensure</i> å—å§‹ç»ˆéƒ½ä¼šè¿è¡Œã€‚ </p> <h2>è¯­æ³•</h2> <pre class="prettyprint">
begin 
   #.. è¿‡ç¨‹
   #.. æŠ›å‡ºå¼‚å¸¸
rescue 
   #.. å¤„ç†é”™è¯¯ 
ensure 
   #.. æœ€åç¡®ä¿æ‰§è¡Œ
   #.. è¿™æ€»æ˜¯ä¼šæ‰§è¡Œ
end
</pre> <h2>å®ä¾‹</h2> <pre class="prettyprint tryit">
begin
  raise 'A test exception.'
rescue Exception =&gt; e
  puts e.message
  puts e.backtrace.inspect
ensure
  puts "Ensuring execution"
end
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
A test exception.
["main.rb:4"]
Ensuring execution
</pre> <h2 class="tutheader">ä½¿ç”¨ <i>else</i> è¯­å¥</h2> <p>å¦‚æœæä¾›äº† <i>else</i> å­å¥ï¼Œå®ƒä¸€èˆ¬æ˜¯æ”¾ç½®åœ¨ <i>rescue</i> å­å¥ä¹‹åï¼Œä»»æ„ <i>ensure</i> ä¹‹å‰ã€‚</p> <p><i>else</i> å­å¥çš„ä¸»ä½“åªæœ‰åœ¨ä»£ç ä¸»ä½“æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æ—¶æ‰§è¡Œã€‚</p> <h2>è¯­æ³•</h2> <pre class="prettyprint">
begin 
   #.. è¿‡ç¨‹ 
   #.. æŠ›å‡ºå¼‚å¸¸
rescue 
   #.. å¤„ç†é”™è¯¯
else
   #.. å¦‚æœæ²¡æœ‰å¼‚å¸¸åˆ™æ‰§è¡Œ
ensure 
   #.. æœ€åç¡®ä¿æ‰§è¡Œ
   #.. è¿™æ€»æ˜¯ä¼šæ‰§è¡Œ
end
</pre> <h2>å®ä¾‹</h2> <pre class="prettyprint tryit">
begin
 # æŠ›å‡º 'A test exception.'
 puts "I'm not raising exception"
rescue Exception =&gt; e
  puts e.message
  puts e.backtrace.inspect
else
   puts "Congratulations-- no errors!"
ensure
  puts "Ensuring execution"
end
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
I'm not raising exception
Congratulations-- no errors!
Ensuring execution
</pre> <p>ä½¿ç”¨ $! å˜é‡å¯ä»¥æ•è·æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚</p> <h2 class="tutheader">Catch å’Œ Throw</h2> <p>raise å’Œ rescue çš„å¼‚å¸¸æœºåˆ¶èƒ½åœ¨å‘ç”Ÿé”™è¯¯æ—¶æ”¾å¼ƒæ‰§è¡Œï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨æ­£å¸¸å¤„ç†æ—¶è·³å‡ºä¸€äº›æ·±å±‚åµŒå¥—çš„ç»“æ„ã€‚æ­¤æ—¶ catch å’Œ throw å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p> <p><i>catch</i> å®šä¹‰äº†ä¸€ä¸ªä½¿ç”¨ç»™å®šçš„åç§°ï¼ˆå¯ä»¥æ˜¯ Symbol æˆ– Stringï¼‰ä½œä¸ºæ ‡ç­¾çš„å—ã€‚å—ä¼šæ­£å¸¸æ‰§è¡ŒçŸ¥é“é‡åˆ°ä¸€ä¸ª throwã€‚</p> <h2>è¯­æ³•</h2> <pre class="prettyprint">
throw :lablename
#.. è¿™ä¸ä¼šè¢«æ‰§è¡Œ
catch :lablename do
#.. åœ¨é‡åˆ°ä¸€ä¸ª throw ååŒ¹é…å°†è¢«æ‰§è¡Œçš„ catch
end

OR

throw :lablename condition
#.. è¿™ä¸ä¼šè¢«æ‰§è¡Œ
catch :lablename do
#.. åœ¨é‡åˆ°ä¸€ä¸ª throw ååŒ¹é…å°†è¢«æ‰§è¡Œçš„ catch
end
</pre> <h2>å®ä¾‹</h2> <p>ä¸‹é¢çš„å®ä¾‹ä¸­ï¼Œå¦‚æœç”¨æˆ·é”®å…¥ '!' å›åº”ä»»ä½•æç¤ºï¼Œä½¿ç”¨ä¸€ä¸ª throw ç»ˆæ­¢ä¸ç”¨æˆ·çš„äº¤äº’ã€‚</p> <pre class="prettyprint">
def promptAndGet(prompt)
   print prompt
   res = readline.chomp
   throw :quitRequested if res == "!"
   return res
end

catch :quitRequested do
   name = promptAndGet("Name: ")
   age = promptAndGet("Age: ")
   sex = promptAndGet("Sex: ")
   # ..
   # å¤„ç†ä¿¡æ¯
end
promptAndGet("Name:")
</pre> <p>ä¸Šé¢çš„ç¨‹åºéœ€è¦äººå·¥äº¤äº’ï¼Œæ‚¨å¯ä»¥åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šè¿›è¡Œå°è¯•ã€‚è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
Name: Ruby on Rails
Age: 3
Sex: !
Name:Just Ruby
</pre> <h2 class="tutheader">ç±» Exception</h2> <p>Ruby çš„æ ‡å‡†ç±»å’Œæ¨¡å—æŠ›å‡ºå¼‚å¸¸ã€‚æ‰€æœ‰çš„å¼‚å¸¸ç±»ç»„æˆä¸€ä¸ªå±‚æ¬¡ï¼ŒåŒ…æ‹¬é¡¶éƒ¨çš„ Exception ç±»åœ¨å†…ã€‚ä¸‹ä¸€å±‚æ˜¯ä¸ƒç§ä¸åŒçš„ç±»å‹ï¼š</p> <ul class="list"> <li>Interrupt</li> <li>NoMemoryError</li> <li>SignalException</li> <li>ScriptError</li> <li>StandardError</li> <li>SystemExit</li> </ul> <p>Fatal æ˜¯è¯¥å±‚ä¸­å¦ä¸€ç§å¼‚å¸¸ï¼Œä½†æ˜¯ Ruby è§£é‡Šå™¨åªåœ¨å†…éƒ¨ä½¿ç”¨å®ƒã€‚</p> <p>ScriptError å’Œ StandardError éƒ½æœ‰ä¸€äº›å­ç±»ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦äº†è§£è¿™äº›ç»†èŠ‚ã€‚æœ€é‡è¦çš„äº‹æƒ…æ˜¯åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„å¼‚å¸¸ç±»ï¼Œå®ƒä»¬å¿…é¡»æ˜¯ç±» Exception æˆ–å…¶å­ä»£çš„å­ç±»ã€‚</p> <p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå®ä¾‹ï¼š</p> <pre class="prettyprint">
class FileSaveError &lt; StandardError
   attr_reader :reason
   def initialize(reason)
      @reason = reason
   end
end
</pre> <p>ç°åœ¨ï¼Œçœ‹ä¸‹é¢çš„å®ä¾‹ï¼Œå°†ç”¨åˆ°ä¸Šé¢çš„å¼‚å¸¸ï¼š</p> <pre class="prettyprint">
File.open(path, "w") do |file|
begin
    # å†™å‡ºæ•°æ® ...
rescue
    # å‘ç”Ÿé”™è¯¯
    raise FileSaveError.new($!)
end
end
</pre> <p>åœ¨è¿™é‡Œï¼Œæœ€é‡è¦çš„ä¸€è¡Œæ˜¯ raise <i>FileSaveError.new($!)</i>ã€‚æˆ‘ä»¬è°ƒç”¨ raise æ¥ç¤ºæ„å¼‚å¸¸å·²ç»å‘ç”Ÿï¼ŒæŠŠå®ƒä¼ ç»™ FileSaveError çš„ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œç”±äºç‰¹å®šçš„å¼‚å¸¸å¼•èµ·æ•°æ®å†™å…¥å¤±è´¥ã€‚</p> </div> <div class="chapter"> <div class="prev">&laquo; <a href="ruby-dir-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-dir-methods.html" rel="prev"> Ruby Dir ç±»å’Œæ–¹æ³•</a></div> <div class="next"><a href="ruby-object-oriented.html" tppabs="http://www.w3cschool.cc/ruby/ruby-object-oriented.html" rel="next">Ruby é¢å‘å¯¹è±¡</a> &raquo;</div> </div> </div> <div id="rightcolumn"> <div class="rightad"> <a href="../w3cnote.htm" tppabs="http://www.w3cschool.cc/w3cnote" target="_blank" style="border-top: 2px;"/> <img src="../wp-content/themes/w3cschool.cc/assets/img/logo-2.png" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/logo-2.png"> </a> </div> <div class="rightad"> <h2 style="color:#67ad03">å…³æ³¨å¾®ä¿¡ä¸‹è½½ç¦»çº¿æ‰‹å†Œ</h2> <a href="javascript:if(confirm('http://m.w3cschool.cc/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://m.w3cschool.cc/'" tppabs="http://m.w3cschool.cc/" target="_blank"/> <img src="../wp-content/themes/w3cschool.cc/assets/img/qrcode.jpg" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/qrcode.jpg" width="150" height="150" alt="w3cschoolç§»åŠ¨ç‰ˆ"/> </a> <a target="_blank" href="javascript:if(confirm('http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9'" tppabs="http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9"><img border="0" src="../../pub.idqqimg.com/wpa/images/group.png" tppabs="http://pub.idqqimg.com/wpa/images/group.png" alt="w3cschool.ccèœé¸Ÿå®¶æ—" title="w3cschool.ccèœé¸Ÿå®¶æ—"></a> </div> <div class="rightad"> <h2>å‚è€ƒæ‰‹å†Œ</h2> <a href="../tags/html-reference.html" tppabs="http://www.w3cschool.cc/tags/html-reference.html" title="HTML 4">HTML å‚è€ƒæ‰‹å†Œ</a> <a href="../jsref/jsref-tutorial.html" tppabs="http://www.w3cschool.cc/jsref/jsref-tutorial.html" title="CSS å‚è€ƒæ‰‹å†Œ">JS å‚è€ƒæ‰‹å†Œ</a> <a href="../cssref/css-reference.html" tppabs="http://www.w3cschool.cc/cssref/css-reference.html" title="CSS å‚è€ƒæ‰‹å†Œ">CSS å‚è€ƒæ‰‹å†Œ</a> <a href="javascript:if(confirm('http://jsbin.w3cschool.cc/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://jsbin.w3cschool.cc/'" tppabs="http://jsbin.w3cschool.cc/" target="_blank" title="jsonæ ¼å¼å·¥å…·"/>HTML/CSS/JS åœ¨çº¿å·¥å…·</a> <a href="../jsontool.htm" tppabs="http://www.w3cschool.cc/jsontool" target="_blank" title="jsonæ ¼å¼å·¥å…·"/>JSON æ ¼å¼å·¥å…·</a> <a href="../coder-learn-path.htm" tppabs="http://www.w3cschool.cc/coder-learn-path" target="_blank"/>ç¨‹åºçŒ¿å­¦ä¹ è·¯çº¿</a> <a href="../chmproblem.htm" tppabs="http://www.w3cschool.cc/chmproblem" target="_blank"/>æ‰“å¼€CHMæ–‡æ¡£é‡åˆ°é—®é¢˜â€¦â€¦</a> <a href="javascript:if(confirm('http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w'" tppabs="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w" rel="nofollow" target="_blank" title="é—®é¢˜/æ„è§åé¦ˆ"/>é—®é¢˜/æ„è§åé¦ˆ</a> </div> <div class="wideSkyscraper"> <script async src="../../pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" tppabs="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-5751451760833794" data-ad-slot="4106274865"></ins> <script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script> </div> </div> <div style="clear:both;"></div> <div id="footer"> <br> <hr style="height:2px;"> <div id="footerImg"><a href="../index.htm" tppabs="http://www.w3cschool.cc/"> <img style="border:0" src="../wp-content/themes/w3cschool.cc/assets/img/w3cschoolcc_gray.gif" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/w3cschoolcc_gray.gif" alt="W3Cschool.cc"/></a> </div> <div id="footerAbout"> <a href="../w3cnote.htm" tppabs="http://www.w3cschool.cc/w3cnote">W3Cèœé¸Ÿç¬”è®°</a> <a href="../disclaimer.htm" tppabs="http://www.w3cschool.cc/disclaimer">å…è´£å£°æ˜</a> <a href="../aboutus.htm" tppabs="http://www.w3cschool.cc/aboutus">å…³äºæˆ‘ä»¬</a> </ul> </div> <div id="footerText"> æä¾›çš„å†…å®¹ä»…ç”¨äºåŸ¹è®­ã€‚æˆ‘ä»¬ä¸ä¿è¯å†…å®¹çš„æ­£ç¡®æ€§ã€‚é€šè¿‡ä½¿ç”¨æœ¬ç«™å†…å®¹éšä¹‹è€Œæ¥çš„é£é™©ä¸æœ¬ç«™æ— å…³ã€‚å½“ä½¿ç”¨æœ¬ç«™æ—¶ï¼Œä»£è¡¨æ‚¨å·²æ¥å—äº†æœ¬ç«™çš„ä½¿ç”¨æ¡æ¬¾å’Œéšç§æ¡æ¬¾ã€‚ ç‰ˆæƒæ‰€æœ‰ï¼Œä¿ç•™ä¸€åˆ‡æƒåˆ©ã€‚W3CSchool ç®€ä½“ä¸­æ–‡ç‰ˆçš„æ‰€æœ‰å†…å®¹ä»…ä¾›æµ‹è¯•ï¼Œå¯¹ä»»ä½•æ³•å¾‹é—®é¢˜åŠé£é™©ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ </div> </div> </div> </div> <a class="backtop" href="javascript:void"></a> <div style="display:none;"> <script src="../../s11.cnzz.com/stat.php-id=5578006&web_id=5578006" tppabs="http://s11.cnzz.com/stat.php?id=5578006&web_id=5578006" language="JavaScript"></script> </div> <div class="share-box"> <div class="share-box-top">åˆ†äº«åˆ°</div> <div class="share-box-inner"> <div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"> <a class="bds_qzone" title="åˆ†äº«åˆ°QQç©ºé—´" href="#"></a> <a class="bds_tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš" href="#"></a> <a class="bds_tqq" title="åˆ†äº«åˆ°äººäººç½‘" href="#"></a> <a class="bds_baidu" title="ç™¾åº¦æ”¶è—" href="#"></a> <span class="bds_more">æ›´å¤š</span> <a class="shareCount" id="shareCount" href="#" title="ç´¯è®¡åˆ†äº«0æ¬¡">0</a> </div> </div> <div class="share-box-bottom"></div> </div> <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=470751" ></script> <script type="text/javascript" id="bdshell_js"></script> <script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script> <script>
function NewWindow(text)
{
  win=window.open(text,'','top=0,left=0,width=400,height=350');
}
$(function() { 
	color_flag = false; //é…è‰²æ ‡è®°
	prev_title_flag = false;
	next_title_flag = false;
 	href = window.location.href;
	console.log('href', href);
	$("#leftcolumn").find("a").each(function(){
		if(next_title_flag) {
				return false; //ç»“æŸå¾ªç¯
		} 
		cur_href = $(this).attr("href");
		cur_obj = $(this);
		
		if(href.match(cur_href) != null) {
			
			if(cur_href.indexOf('/') == -1) { //ç¬¬äºŒé‡åˆ¤æ–­
				tmp_url = href.substring(0, href.lastIndexOf('/')+1) + cur_href;
				console.log('tmp_url', tmp_url);
				if(href != tmp_url) return;
			}
			if(!color_flag) {
				$(this).css("font-weight", "bold");
				color_flag = true;
			}
			prev_href = $(this).prev("a").attr("href");
			prev_title = $(this).prev("a").attr("title");
			if(!prev_title) prev_title=$(this).prev("a").text();
			next_href = $(this).next("a").attr("href");
			next_title = $(this).next("a").attr("title");
			if(!next_title) next_title=$(this).next("a").text();
			if(!prev_title_flag) {
				if( prev_title ) {
					$(".prev a").attr("href", prev_href);
					$(".prev a").attr("title", prev_title);
					$(".prev a").text( prev_title);
				} else {
					if(typeof(prev_obj) != 'undefined') {
						prev_href = prev_obj.attr("href");
						prev_title = prev_obj.attr("title");
						if(!prev_title) prev_title=prev_obj.text();
						if(prev_title) {
							$(".prev a").attr("href", prev_href);
							$(".prev a").attr("title", prev_title);
							$(".prev a").text( prev_title);
						}
					}
					
				}
				prev_title_flag = true;
			}
			if(next_title) {
				if($(".next a").attr("href")) {
					$(".next a").attr("href", next_href);
					$(".next a").attr("title", next_title);
					$(".next a").text( next_title);
				} else {
					$(".next").html("<a href=\"" + next_href + "\" rel=\"next\" title=\"" + next_title + "\">" + next_title + "</a> &raquo;");
				}
				
				next_title_flag = true;
				
			}
			console.log(prev_href,prev_title);
			console.log(next_href,next_title);
			//return false; 
		} else {
			prev_obj = cur_obj;
			if(next_title_flag) {
				return false;
			} else {
				if(prev_title_flag) {
					next_href = $(this).attr("href");
					next_title = $(this).attr("title");
					if(!next_title) next_title=$(this).text();
					if(next_title) {
						if($(".next a").attr("href")) {
							$(".next a").attr("href", next_href);
							$(".next a").attr("title", next_title);
							$(".next a").text( next_title);
						} else {
							$(".next").html("<a href=\"" + next_href + "\" rel=\"next\" title=\"" + next_title + "\">" + next_title + "</a> &raquo;");
						}
						next_title_flag = true;
					}
				}
			}
		}
		
  });
  
  	$(window).scroll(function () {
        if($(window).scrollTop()>=100) {
            $(".backtop").fadeIn();
        }else {
        	
        		$(".backtop").fadeOut();
        }
    });
	

	$(".backtop").click(function(event){	
		$('html,body').animate({scrollTop:0}, 500);
		return false;
	});
		
});
var host = window.location.host;
if (/(iPhone|iPad|iPod|iOS|BlackBerry|IEMobile|Android)/i.test(navigator.userAgent)) {

    if(host == 'http://www.w3cschool.cc/ruby/www.w3cschool.cc') {
		href = window.location.href;
		href=href.replace(/www.w3cschool.cc/, "http://www.w3cschool.cc/ruby/m.w3cschool.cc");
		window.location.href=href;
	}
}
</script> </body> </html>