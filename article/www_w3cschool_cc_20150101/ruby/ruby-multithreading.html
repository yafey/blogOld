<!Doctype html> <html xmlns=http://www.w3.org/1999/xhtml> <head> <meta charset="UTF-8"> <title>Ruby å¤šçº¿ç¨‹ | w3cschoolèœé¸Ÿæ•™ç¨‹</title> <link rel='prev' title='Ruby Web Services åº”ç”¨ &#8211; SOAP4R' href="ruby-web-services.html"/> <link rel='next' title='Python IDE' href="/python/python-ide.html"/> <link rel='canonical' href='http://www.w3cschool.cc/ruby/ruby-multithreading.html'/> <meta name="keywords" content="Ruby å¤šçº¿ç¨‹"> <meta name="description" content="Ruby å¤šçº¿ç¨‹ æ¯ä¸ªæ­£åœ¨ç³»ç»Ÿä¸Šè¿è¡Œçš„ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹åŒ…å«ä¸€åˆ°å¤šä¸ªçº¿ç¨‹ã€‚ çº¿ç¨‹æ˜¯ç¨‹åºä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ï¼Œåœ¨å•ä¸ªç¨‹åºä¸­åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹å®Œæˆä¸åŒçš„å·¥ä½œ,ç§°ä¸ºå¤šçº¿ç¨‹ã€‚ Ruby ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ Thread ç±»æ¥åˆ›å»ºå¤šçº¿ç¨‹ï¼ŒRubyçš„çº¿ç¨‹æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œå¯ä»¥ä»¥é«˜æ•ˆçš„æ–¹å¼æ¥å®ç°å¹¶è¡Œçš„ä»£ç ã€‚ åˆ›å»º Ruby çº¿ç¨‹ è¦å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œåªéœ€è¦è°ƒç”¨ Thread.new å³å¯: # çº¿ç¨‹ #1 ä»£ç éƒ¨åˆ† Thread.new { .."> <!--[if lt IE 7]> <style> #leftcolumn{margin-left:0} </style> <![endif]--> <link rel="shortcut icon" href="../favicon.ico" tppabs="http://www.w3cschool.cc/favicon.ico" mce_href="/favicon.ico" type="image/x-icon"> <script src="../../libs.baidu.com/jquery/1.8.1/jquery.min.js" tppabs="http://libs.baidu.com/jquery/1.8.1/jquery.min.js"></script> <link rel="stylesheet" type="text/css" href="../wp-content/themes/w3cschool.cc/assets/css/stdtheme.css-1.04.css" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/css/stdtheme.css?1.04"> </head> <body> <div id="top"> <div style="height:78px;"> <div id="topLogo"> <a id="top"></a> <a href="../index.htm" tppabs="http://www.w3cschool.cc/" title="w3cschoolèœé¸Ÿæ•™ç¨‹"><img width="336" height="69" src="../wp-content/themes/w3cschool.cc/assets/img/logo.png" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/logo.png" alt="W3CSchool.cc" style="border:0;margin-top:5px;"/></a> </div> <div id="searchTranslate"> <div id="searchText">Search w3cschool.cc:</div> <div id="googleSearch"> <form name="cse" id="searchbox_demo" action="http://wen.lu/search" target="_blank"> <input type="hidden" name="cref"/> <input type="hidden" name="ie" value="utf-8"/> <input type="hidden" name="hl"/> <input type="hidden" name="sitesearch" value="w3cschool.cc"> <input name="as_q" type="text" size="20"/> <input type="submit" name="sa" value="æœç´¢"/> </form> </div> </div> </div> <div id="topnav"> <div id="topnavTut"> <a href="../index.htm" tppabs="http://www.w3cschool.cc/">é¦–é¡µ</a> <a href="../html/html-tutorial.html" tppabs="http://www.w3cschool.cc/html/html-tutorial.html">HTML</a> <a href="../css/css-tutorial.html" tppabs="http://www.w3cschool.cc/css/css-tutorial.html">CSS</a> <a href="../js/js-tutorial.html" tppabs="http://www.w3cschool.cc/js/js-tutorial.html">JavaScript</a> <a href="../jquery/jquery-tutorial.html" tppabs="http://www.w3cschool.cc/jquery/jquery-tutorial.html">jQuery</a> <a href="../jqueryui/jqueryui-tutorial.html" tppabs="http://www.w3cschool.cc/jqueryui/jqueryui-tutorial.html">jQueryUI</a> <a href="../bootstrap/bootstrap-tutorial.html" tppabs="http://www.w3cschool.cc/bootstrap/bootstrap-tutorial.html">Bootstrap</a> <a href="../jquerymobile/jquerymobile-tutorial.html" tppabs="http://www.w3cschool.cc/jquerymobile/jquerymobile-tutorial.html">jMobile</a> <a href="../jeasyui/jqueryeasyui-tutorial.html" tppabs="http://www.w3cschool.cc/jeasyui/jqueryeasyui-tutorial.html">EasyUI</a> <a href="../xml/xml-tutorial.html" tppabs="http://www.w3cschool.cc/xml/xml-tutorial.html">XML</a> <a href="../sql/sql-tutorial.html" tppabs="http://www.w3cschool.cc/sql/sql-tutorial.html">SQL</a> <a href="../mysql/mysql-tutorial.html" tppabs="http://www.w3cschool.cc/mysql/mysql-tutorial.html">MySQL</a> <a href="../sqlite/sqlite-tutorial.html" tppabs="http://www.w3cschool.cc/sqlite/sqlite-tutorial.html">SQLite</a> <a href="../php/php-tutorial.html" tppabs="http://www.w3cschool.cc/php/php-tutorial.html">PHP</a> <a href="../csharp/csharp-tutorial.html" tppabs="http://www.w3cschool.cc/csharp/csharp-tutorial.html">C#</a> <a href="../python/python-tutorial.html" tppabs="http://www.w3cschool.cc/python/python-tutorial.html">Python</a> <a href="../java/java-tutorial.html" tppabs="http://www.w3cschool.cc/java/java-tutorial.html">Java</a> <a href="../jsp/jsp-tutorial.html" tppabs="http://www.w3cschool.cc/jsp/jsp-tutorial.html">JSP</a> <a href="ruby-tutorial.html" tppabs="http://www.w3cschool.cc/ruby/ruby-tutorial.html">Ruby</a> <a href="../css-radius.htm" tppabs="http://www.w3cschool.cc/css-radius">å‰ç«¯å·¥å…·</a> <a href="../sitemap.htm" tppabs="http://www.w3cschool.cc/sitemap">æ›´å¤šâ€¦â€¦</a> </div> <div id="topnavAbout"> </div> </div> <div id="page"> <div style="clear:both;"></div> <div id="leftcolumn"> <h2 class="left"><strong>Ruby æ•™ç¨‹</strong></h2> <a target="_top" title="Ruby æ•™ç¨‹" href="ruby-tutorial.html" tppabs="http://www.w3cschool.cc/ruby/ruby-tutorial.html"> Ruby æ•™ç¨‹ </a> <a target="_top" title="Ruby ç®€ä»‹" href="ruby-intro.html" tppabs="http://www.w3cschool.cc/ruby/ruby-intro.html"> Ruby ç®€ä»‹ </a> <a target="_top" title="Ruby ç¯å¢ƒ" href="ruby-environment.html" tppabs="http://www.w3cschool.cc/ruby/ruby-environment.html"> Ruby ç¯å¢ƒ </a> <a target="_top" title="Ruby å®‰è£… &#8211; Unix" href="ruby-installation-unix.html" tppabs="http://www.w3cschool.cc/ruby/ruby-installation-unix.html"> Ruby å®‰è£… - Unix </a> <a target="_top" title="Ruby å®‰è£… &#8211; Windows" href="ruby-installation-windows.html" tppabs="http://www.w3cschool.cc/ruby/ruby-installation-windows.html"> Ruby å®‰è£… - Windows </a> <a target="_top" title="Ruby å‘½ä»¤è¡Œé€‰é¡¹" href="ruby-command-line-options.html" tppabs="http://www.w3cschool.cc/ruby/ruby-command-line-options.html"> Ruby å‘½ä»¤è¡Œé€‰é¡¹ </a> <a target="_top" title="Ruby ç¯å¢ƒå˜é‡" href="ruby-environment-variables.html" tppabs="http://www.w3cschool.cc/ruby/ruby-environment-variables.html"> Ruby ç¯å¢ƒå˜é‡ </a> <a target="_top" title="Ruby è¯­æ³•" href="ruby-syntax.html" tppabs="http://www.w3cschool.cc/ruby/ruby-syntax.html"> Ruby è¯­æ³• </a> <a target="_top" title="Ruby ç±»å’Œå¯¹è±¡" href="ruby-class.html" tppabs="http://www.w3cschool.cc/ruby/ruby-class.html"> Ruby ç±»å’Œå¯¹è±¡ </a> <a target="_top" title="Ruby ç±»æ¡ˆä¾‹" href="ruby-class-case-study.html" tppabs="http://www.w3cschool.cc/ruby/ruby-class-case-study.html"> Ruby ç±»æ¡ˆä¾‹ </a> <a target="_top" title="Ruby å˜é‡" href="ruby-variable.html" tppabs="http://www.w3cschool.cc/ruby/ruby-variable.html"> Ruby å˜é‡ </a> <a target="_top" title="Ruby è¿ç®—ç¬¦" href="ruby-operator.html" tppabs="http://www.w3cschool.cc/ruby/ruby-operator.html"> Ruby è¿ç®—ç¬¦ </a> <a target="_top" title="Ruby æ³¨é‡Š" href="ruby-comment.html" tppabs="http://www.w3cschool.cc/ruby/ruby-comment.html"> Ruby æ³¨é‡Š </a> <a target="_top" title="Ruby åˆ¤æ–­" href="ruby-decision.html" tppabs="http://www.w3cschool.cc/ruby/ruby-decision.html"> Ruby åˆ¤æ–­ </a> <a target="_top" title="Ruby å¾ªç¯" href="ruby-loop.html" tppabs="http://www.w3cschool.cc/ruby/ruby-loop.html"> Ruby å¾ªç¯ </a> <a target="_top" title="Ruby æ–¹æ³•" href="ruby-method.html" tppabs="http://www.w3cschool.cc/ruby/ruby-method.html"> Ruby æ–¹æ³• </a> <a target="_top" title="Ruby å—" href="ruby-block.html" tppabs="http://www.w3cschool.cc/ruby/ruby-block.html"> Ruby å— </a> <a target="_top" title="Ruby æ¨¡å—ï¼ˆModuleï¼‰" href="ruby-module.html" tppabs="http://www.w3cschool.cc/ruby/ruby-module.html"> Ruby æ¨¡å—ï¼ˆModuleï¼‰ </a> <a target="_top" title="Ruby å­—ç¬¦ä¸²ï¼ˆStringï¼‰" href="ruby-string.html" tppabs="http://www.w3cschool.cc/ruby/ruby-string.html"> Ruby å­—ç¬¦ä¸²ï¼ˆStringï¼‰ </a> <a target="_top" title="Ruby æ•°ç»„ï¼ˆArrayï¼‰" href="ruby-array.html" tppabs="http://www.w3cschool.cc/ruby/ruby-array.html"> Ruby æ•°ç»„ï¼ˆArrayï¼‰ </a> <a target="_top" title="Ruby å“ˆå¸Œï¼ˆHashï¼‰" href="ruby-hash.html" tppabs="http://www.w3cschool.cc/ruby/ruby-hash.html"> Ruby å“ˆå¸Œï¼ˆHashï¼‰ </a> <a target="_top" title="Ruby æ—¥æœŸ &#038; æ—¶é—´ï¼ˆDate &#038; Timeï¼‰" href="ruby-date-time.html" tppabs="http://www.w3cschool.cc/ruby/ruby-date-time.html"> Ruby æ—¥æœŸ & æ—¶é—´ </a> <a target="_top" title="Ruby èŒƒå›´ï¼ˆRangeï¼‰" href="ruby-range.html" tppabs="http://www.w3cschool.cc/ruby/ruby-range.html"> Ruby èŒƒå›´ï¼ˆRangeï¼‰ </a> <a target="_top" title="Ruby è¿­ä»£å™¨" href="ruby-iterators.html" tppabs="http://www.w3cschool.cc/ruby/ruby-iterators.html"> Ruby è¿­ä»£å™¨ </a> <a target="_top" title="Ruby æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º" href="ruby-input-output.html" tppabs="http://www.w3cschool.cc/ruby/ruby-input-output.html"> Ruby æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º </a> <a target="_top" title="Ruby File ç±»å’Œæ–¹æ³•" href="ruby-file-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-file-methods.html"> Ruby File ç±»å’Œæ–¹æ³• </a> <a target="_top" title="Ruby Dir ç±»å’Œæ–¹æ³•" href="ruby-dir-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-dir-methods.html"> Ruby Dir ç±»å’Œæ–¹æ³• </a> <a target="_top" title="Ruby å¼‚å¸¸" href="ruby-exceptions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-exceptions.html"> Ruby å¼‚å¸¸ </a> <br><h2 class="left"><span class="left_h2">Ruby</span> é«˜çº§æ•™ç¨‹</h2> <a target="_top" title="Ruby é¢å‘å¯¹è±¡" href="ruby-object-oriented.html" tppabs="http://www.w3cschool.cc/ruby/ruby-object-oriented.html"> Ruby é¢å‘å¯¹è±¡ </a> <a target="_top" title="Ruby æ­£åˆ™è¡¨è¾¾å¼" href="ruby-regular-expressions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-regular-expressions.html"> Ruby æ­£åˆ™è¡¨è¾¾å¼ </a> <a target="_top" title="Ruby æ•°æ®åº“è®¿é—® &#8211; DBI æ•™ç¨‹" href="ruby-database-access.html" tppabs="http://www.w3cschool.cc/ruby/ruby-database-access.html"> Ruby æ•°æ®åº“è®¿é—® - DBI æ•™ç¨‹ </a> <a target="_top" title="Ruby CGI ç¼–ç¨‹" href="ruby-cgi.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi.html"> Ruby CGI ç¼–ç¨‹ </a> <a target="_top" title="Ruby CGIæ–¹æ³•" href="ruby-cgi-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-methods.html"> Ruby CGIæ–¹æ³• </a> <a target="_top" title="Ruby CGI Cookies" href="ruby-cgi-cookies.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-cookies.html"> Ruby CGI Cookies </a> <a target="_top" title="Ruby CGI Sessions" href="ruby-cgi-sessions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-sessions.html"> Ruby CGI Sessions </a> <a target="_top" title="Ruby å‘é€é‚®ä»¶ &#8211; SMTP" href="ruby-sending-email.html" tppabs="http://www.w3cschool.cc/ruby/ruby-sending-email.html"> Ruby å‘é€é‚®ä»¶ - SMTP </a> <a target="_top" title="Ruby Socket ç¼–ç¨‹" href="ruby-socket-programming.html" tppabs="http://www.w3cschool.cc/ruby/ruby-socket-programming.html"> Ruby Socket ç¼–ç¨‹ </a> <a target="_top" title="Ruby XML, XSLT å’Œ XPath æ•™ç¨‹" href="ruby-xml-xslt-xpath.html" tppabs="http://www.w3cschool.cc/ruby/ruby-xml-xslt-xpath.html"> Ruby XML, XSLT å’Œ XPath æ•™ç¨‹ </a> <a target="_top" title="Ruby Web Services åº”ç”¨ &#8211; SOAP4R" href="ruby-web-services.html" tppabs="http://www.w3cschool.cc/ruby/ruby-web-services.html"> Ruby Web Services </a> <a target="_top" title="Ruby å¤šçº¿ç¨‹" href="ruby-multithreading.html" tppabs="http://www.w3cschool.cc/ruby/ruby-multithreading.html"> Ruby å¤šçº¿ç¨‹ </a> </div><div id="main"> <div id="mainLeaderboard"> <div style="width:728px;height:90px;float:right;"> <script async src="../../pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" tppabs="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-5751451760833794" data-ad-slot="2542143260"></ins> <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> </div> </div> <div class="chapter"> <div class="prev">&laquo; <a href="ruby-web-services.html" tppabs="http://www.w3cschool.cc/ruby/ruby-web-services.html" rel="prev"> Ruby Web Services åº”ç”¨ &#8211; SOAP4R</a></div> <div class="next"></div> </div> <div id="content"> <h1>Ruby å¤šçº¿ç¨‹</h1> <p>æ¯ä¸ªæ­£åœ¨ç³»ç»Ÿä¸Šè¿è¡Œçš„ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹åŒ…å«ä¸€åˆ°å¤šä¸ªçº¿ç¨‹ã€‚</p> <p>çº¿ç¨‹æ˜¯ç¨‹åºä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ï¼Œåœ¨å•ä¸ªç¨‹åºä¸­åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹å®Œæˆä¸åŒçš„å·¥ä½œ,ç§°ä¸ºå¤šçº¿ç¨‹ã€‚</p> <p>Ruby ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ Thread ç±»æ¥åˆ›å»ºå¤šçº¿ç¨‹ï¼ŒRubyçš„çº¿ç¨‹æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œå¯ä»¥ä»¥é«˜æ•ˆçš„æ–¹å¼æ¥å®ç°å¹¶è¡Œçš„ä»£ç ã€‚</p> <hr> <h2>åˆ›å»º Ruby çº¿ç¨‹</h2> <p>è¦å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œåªéœ€è¦è°ƒç”¨ Thread.new å³å¯:</p> <pre>
# çº¿ç¨‹ #1 ä»£ç éƒ¨åˆ†
Thread.new {
  # çº¿ç¨‹ #2 æ‰§è¡Œä»£ç 
}
# çº¿ç¨‹ #1 æ‰§è¡Œä»£ç 
</pre> <h3>å®ä¾‹</h3> <p>ä»¥ä¸‹å®ä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨Rubyç¨‹åºä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼š</p> <pre>
#!/usr/bin/ruby

def func1
   i=0
   while i&lt;=2
      puts "func1 at: #{Time.now}"
      sleep(2)
      i=i+1
   end
end

def func2
   j=0
   while j&lt;=2
      puts "func2 at: #{Time.now}"
      sleep(1)
      j=j+1
   end
end

puts "Started At #{Time.now}"
t1=Thread.new{func1()}
t2=Thread.new{func2()}
t1.join
t2.join
puts "End at #{Time.now}"
</pre> <p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š</p> <pre>
Started At Wed May 14 08:21:54 -0700 2014
func1 at: Wed May 14 08:21:54 -0700 2014
func2 at: Wed May 14 08:21:54 -0700 2014
func2 at: Wed May 14 08:21:55 -0700 2014
func1 at: Wed May 14 08:21:56 -0700 2014
func2 at: Wed May 14 08:21:56 -0700 2014
func1 at: Wed May 14 08:21:58 -0700 2014
End at Wed May 14 08:22:00 -0700 2014
</pre> <h2>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</h2> <p>1ã€çº¿ç¨‹çš„åˆ›å»ºå¯ä»¥ä½¿ç”¨Thread.new,åŒæ ·å¯ä»¥ä»¥åŒæ ·çš„è¯­æ³•ä½¿ç”¨Thread.start æˆ–è€…Thread.forkè¿™ä¸‰ä¸ªæ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ã€‚</p> <p>2ã€åˆ›å»ºçº¿ç¨‹åæ— éœ€å¯åŠ¨ï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p> <p>3ã€Thread ç±»å®šä¹‰äº†ä¸€äº›æ–¹æ³•æ¥æ“æ§çº¿ç¨‹ã€‚çº¿ç¨‹æ‰§è¡ŒThread.newä¸­çš„ä»£ç å—ã€‚</p> <p>4ã€çº¿ç¨‹ä»£ç å—ä¸­æœ€åä¸€ä¸ªè¯­å¥æ˜¯çº¿ç¨‹çš„å€¼ï¼Œå¯ä»¥é€šè¿‡çº¿ç¨‹çš„æ–¹æ³•æ¥è°ƒç”¨ï¼Œå¦‚æœçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œåˆ™è¿”å›çº¿ç¨‹å€¼ï¼Œå¦åˆ™ä¸è¿”å›å€¼ç›´åˆ°çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚</p> <p>5ã€Thread.current æ–¹æ³•è¿”å›è¡¨ç¤ºå½“å‰çº¿ç¨‹çš„å¯¹è±¡ã€‚ Thread.main æ–¹æ³•è¿”å›ä¸»çº¿ç¨‹ã€‚</p> <p>6ã€é€šè¿‡ Thread.Join æ–¹æ³•æ¥æ‰§è¡Œçº¿ç¨‹ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæŒ‚èµ·ä¸»çº¿ç¨‹ï¼Œç›´åˆ°å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚</p> <hr><h2>çº¿ç¨‹çŠ¶æ€</h2> <p>çº¿ç¨‹æœ‰5ç§çŠ¶æ€ï¼š</p> <table class="reference"> <tbody><tr><th style="width:50%">çº¿ç¨‹çŠ¶æ€</th><th>è¿”å›å€¼</th></tr> <tr><td>Runnable</td><td>run</td></tr> <tr><td>Sleeping</td><td>Sleeping</td></tr> <tr><td>Aborting</td><td>aborting</td></tr> <tr><td>Terminated normally</td><td>false </td></tr> <tr><td>Terminated with exception</td><td>nil </td></tr> </tbody></table> <hr> <h2>çº¿ç¨‹å’Œå¼‚å¸¸</h2> <p>å½“æŸçº¿ç¨‹å‘ç”Ÿå¼‚å¸¸ï¼Œä¸”æ²¡æœ‰è¢«rescueæ•æ‰åˆ°æ—¶ï¼Œè¯¥çº¿ç¨‹é€šå¸¸ä¼šè¢«æ— è­¦å‘Šåœ°ç»ˆæ­¢ã€‚ä½†æ˜¯ï¼Œè‹¥æœ‰å…¶å®ƒçº¿ç¨‹å› ä¸ºThread#joinçš„å…³ç³»ä¸€ç›´ç­‰å¾…è¯¥çº¿ç¨‹çš„è¯ï¼Œåˆ™ç­‰å¾…çš„çº¿ç¨‹åŒæ ·ä¼šè¢«å¼•å‘ç›¸åŒçš„å¼‚å¸¸ã€‚ </p> <pre>
begin
  t = Thread.new do
    Thread.pass    # ä¸»çº¿ç¨‹ç¡®å®åœ¨ç­‰join
    raise "unhandled exception"
  end
  t.join
rescue
  p $!  # =&gt; "unhandled exception"
end
</pre> <p>ä½¿ç”¨ä¸‹åˆ—3ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥è®©è§£é‡Šå™¨åœ¨æŸä¸ªçº¿ç¨‹å› å¼‚å¸¸è€Œç»ˆæ­¢æ—¶ä¸­æ–­è¿è¡Œã€‚</p> <ul> <li>å¯åŠ¨è„šæœ¬æ—¶æŒ‡å®š<b>-d</b>é€‰é¡¹ï¼Œå¹¶ä»¥è°ƒè¯•æ¨¡æ—¶è¿è¡Œã€‚</li> <li>ç”¨<code>Thread.abort_on_exception</code>è®¾ç½®æ ‡å¿—ã€‚</li> <li>ä½¿ç”¨<code>Thread#abort_on_exception</code>å¯¹æŒ‡å®šçš„çº¿ç¨‹è®¾å®šæ ‡å¿—ã€‚</li> </ul> <p>å½“ä½¿ç”¨ä¸Šè¿°3ç§æ–¹æ³•ä¹‹ä¸€åï¼Œæ•´ä¸ªè§£é‡Šå™¨å°±ä¼šè¢«ä¸­æ–­ã€‚</p> <pre>
t = Thread.new { ... }
t.abort_on_exception = true
</pre> <hr> <h2>çº¿ç¨‹åŒæ­¥æ§åˆ¶</h2> <p>åœ¨Rubyä¸­ï¼Œæä¾›ä¸‰ç§å®ç°åŒæ­¥çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p> <p>1. é€šè¿‡Mutexç±»å®ç°çº¿ç¨‹åŒæ­¥</p> <p>2. ç›‘ç®¡æ•°æ®äº¤æ¥çš„Queueç±»å®ç°çº¿ç¨‹åŒæ­¥</p> <p>3. ä½¿ç”¨ConditionVariableå®ç°åŒæ­¥æ§åˆ¶</p> <h3>é€šè¿‡Mutexç±»å®ç°çº¿ç¨‹åŒæ­¥</h3> <p>é€šè¿‡Mutexç±»å®ç°çº¿ç¨‹åŒæ­¥æ§åˆ¶ï¼Œå¦‚æœåœ¨å¤šä¸ªçº¿ç¨‹é’ŸåŒæ—¶éœ€è¦ä¸€ä¸ªç¨‹åºå˜é‡ï¼Œå¯ä»¥å°†è¿™ä¸ªå˜é‡éƒ¨åˆ†ä½¿ç”¨locké”å®šã€‚ ä»£ç å¦‚ä¸‹ï¼š</p> <pre>
#encoding:gbk
require "thread"
puts "Synchronize Thread"

@num=200
@mutex=Mutex.new

def buyTicket(num)
	@mutex.lock
		if @num&gt;=num
			@num=@num-num
			puts "you have successfully bought #{num} tickets"
		else
			puts "sorry,no enough tickets"
		end
	@mutex.unlock
end

ticket1=Thread.new 10 do
	10.times do |value|
	ticketNum=15
	buyTicket(ticketNum)
	sleep 0.01
	end
end

ticket2=Thread.new 10 do
	10.times do |value|
	ticketNum=20
	buyTicket(ticketNum)
	sleep 0.01
	end
end

sleep 1
ticket1.join
ticket2.join

</pre> <p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p> <pre>
Synchronize Thread
you have successfully bought 15 tickets
you have successfully bought 20 tickets
you have successfully bought 15 tickets
you have successfully bought 20 tickets
you have successfully bought 15 tickets
you have successfully bought 20 tickets
you have successfully bought 15 tickets
you have successfully bought 20 tickets
you have successfully bought 15 tickets
you have successfully bought 20 tickets
you have successfully bought 15 tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
sorry,no enough tickets
</pre> <p>é™¤äº†ä½¿ç”¨locké”å®šå˜é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨try_locké”å®šå˜é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨Mutex.synchronizeåŒæ­¥å¯¹æŸä¸€ä¸ªå˜é‡çš„è®¿é—®ã€‚</p> <h3>ç›‘ç®¡æ•°æ®äº¤æ¥çš„Queueç±»å®ç°çº¿ç¨‹åŒæ­¥</h3> <p> Queueç±»å°±æ˜¯è¡¨ç¤ºä¸€ä¸ªæ”¯æŒçº¿ç¨‹çš„é˜Ÿåˆ—ï¼Œèƒ½å¤ŸåŒæ­¥å¯¹é˜Ÿåˆ—æœ«å°¾è¿›è¡Œè®¿é—®ã€‚ä¸åŒçš„çº¿ç¨‹å¯ä»¥ä½¿ç”¨ç»Ÿä¸€ä¸ªå¯¹ç±»ï¼Œä½†æ˜¯ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé˜Ÿåˆ—ä¸­çš„æ•°æ®æ˜¯å¦èƒ½å¤ŸåŒæ­¥ï¼Œå¦å¤–ä½¿ç”¨SizedQueueç±»èƒ½å¤Ÿé™åˆ¶é˜Ÿåˆ—çš„é•¿åº¦ </p><p>SizedQueueç±»èƒ½å¤Ÿéå¸¸ä¾¿æ·çš„å¸®åŠ©æˆ‘ä»¬å¼€å‘çº¿ç¨‹åŒæ­¥çš„åº”ç”¨ç¨‹åºï¼Œåº”ä¸ºåªè¦åŠ å…¥åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå°±ä¸ç”¨å…³å¿ƒçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ã€‚ </p> <p>ç»å…¸çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼š</p> <pre>
#encoding:gbk
require "thread"
puts "SizedQuee Test"

queue = Queue.new

producer = Thread.new do
	10.times do |i|
		sleep rand(i) # è®©çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´
		queue &lt;&lt; i
		puts "#{i} produced"
	end
end

consumer = Thread.new do
	10.times do |i|
		value = queue.pop
		sleep rand(i/2)
		puts "consumed #{value}"
	end
end

consumer.join
</pre> <p>ç¨‹åºçš„è¾“å‡ºï¼š</p> <pre>
SizedQuee Test
0 produced
1 produced
consumed 0
2 produced
consumed 1
consumed 2
3 produced
consumed 34 produced

consumed 4
5 produced
consumed 5
6 produced
consumed 6
7 produced
consumed 7
8 produced
9 produced
consumed 8
consumed 9
</pre> <h3>ä½¿ç”¨ConditionVariableå®ç°åŒæ­¥æ§åˆ¶</h3> <p>ä½¿ç”¨ ConditonVariableè¿›è¡ŒåŒæ­¥æ§åˆ¶ï¼Œèƒ½å¤Ÿåœ¨ä¸€äº›è‡´å‘½çš„èµ„æºç«äº‰éƒ¨åˆ†æŒ‚èµ·çº¿ç¨‹ç›´åˆ°æœ‰å¯ç”¨çš„èµ„æºä¸ºæ­¢ã€‚</p> <pre>
#encoding:gbk
require "thread"
puts "thread synchronize by ConditionVariable"

mutex = Mutex.new
resource = ConditionVariable.new

a = Thread.new {
	mutex.synchronize {
		# è¿™ä¸ªçº¿ç¨‹ç›®å‰éœ€è¦resourceè¿™ä¸ªèµ„æº
		resource.wait(mutex) 
		puts "get resource"
	}
}

b = Thread.new {
	mutex.synchronize {
		#çº¿ç¨‹bå®Œæˆå¯¹resoureceèµ„æºçš„ä½¿ç”¨å¹¶é‡Šæ”¾resource
		resource.signal
	}
}

a.join
puts "complete"
</pre> <p>mutex æ˜¯å£°æ˜çš„ä¸€ä¸ªèµ„æºï¼Œç„¶åé€šè¿‡ConditionVariableæ¥æ§åˆ¶ç”³è¯·å’Œé‡Šæ”¾è¿™ä¸ªèµ„æºã€‚</p><p> b çº¿ç¨‹å®Œæˆäº†æŸäº›å·¥ä½œä¹‹åé‡Šæ”¾èµ„æºresource.signal,è¿™æ ·açº¿ç¨‹å°±å¯ä»¥è·å¾—ä¸€ä¸ªmutexèµ„æºç„¶åè¿›è¡Œæ‰§è¡Œã€‚ æ‰§è¡Œç»“æœï¼š </p> <pre>
thread synchronize by ConditionVariable
get resource
complete
</pre> <hr> <h2>çº¿ç¨‹ç±»æ–¹æ³•</h2> <p>å®Œæ•´çš„ Threadï¼ˆçº¿ç¨‹ï¼‰ ç±»æ–¹æ³•å¦‚ä¸‹ï¼š</p> <table class="reference"> <tbody><tr><th style="width:5%">åºå·</th><th>æ–¹æ³•æè¿°</th></tr> <tr><td>1</td><td><b>Thread.abort_on_exception</b><br>è‹¥å…¶å€¼ä¸ºçœŸçš„è¯ï¼Œä¸€æ—¦æŸçº¿ç¨‹å› å¼‚å¸¸è€Œç»ˆæ­¢æ—¶ï¼Œæ•´ä¸ªè§£é‡Šå™¨å°±ä¼šè¢«ä¸­æ–­ã€‚å®ƒçš„é»˜è®¤å€¼æ˜¯å‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè‹¥æŸçº¿ç¨‹å‘ç”Ÿå¼‚å¸¸ä¸”è¯¥å¼‚å¸¸æœªè¢«Thread#joinç­‰æ£€æµ‹åˆ°æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šè¢«æ— è­¦å‘Šåœ°ç»ˆæ­¢ã€‚</td></tr> <tr><td>2</td><td><b>Thread.abort_on_exception=</b><br>å¦‚æœè®¾ç½®ä¸º <i>true</i>, ä¸€æ—¦æŸçº¿ç¨‹å› å¼‚å¸¸è€Œç»ˆæ­¢æ—¶ï¼Œæ•´ä¸ªè§£é‡Šå™¨å°±ä¼šè¢«ä¸­æ–­ã€‚è¿”å›æ–°çš„çŠ¶æ€</td></tr> <tr><td>3</td><td><b>Thread.critical</b><br>è¿”å›å¸ƒå°”å€¼ã€‚</td></tr> <tr><td>4</td><td><b>Thread.critical=</b><br>å½“å…¶å€¼ä¸ºtrueæ—¶ï¼Œå°†ä¸ä¼šè¿›è¡Œçº¿ç¨‹åˆ‡æ¢ã€‚è‹¥å½“å‰çº¿ç¨‹æŒ‚èµ·(stop)æˆ–æœ‰ä¿¡å·(signal)å¹²é¢„æ—¶ï¼Œå…¶å€¼å°†è‡ªåŠ¨å˜ä¸ºfalseã€‚</td></tr> <tr><td>5</td><td><b>Thread.current</b><br>è¿”å›å½“å‰è¿è¡Œä¸­çš„çº¿ç¨‹(å½“å‰çº¿ç¨‹)ã€‚</td></tr> <tr><td>6</td><td><b>Thread.exit</b><br>ç»ˆæ­¢å½“å‰çº¿ç¨‹çš„è¿è¡Œã€‚è¿”å›å½“å‰çº¿ç¨‹ã€‚è‹¥å½“å‰çº¿ç¨‹æ˜¯å”¯ä¸€çš„ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå°†ä½¿ç”¨exit(0)æ¥ç»ˆæ­¢å®ƒçš„è¿è¡Œã€‚</td></tr> <tr><td>7</td><td><b>Thread.fork { block }</b><br>ä¸ Thread.new ä¸€æ ·ç”Ÿæˆçº¿ç¨‹ã€‚</td></tr> <tr><td>8</td><td><b>Thread.kill( aThread )</b><br>ç»ˆæ­¢çº¿ç¨‹çš„è¿è¡Œ.</td></tr> <tr><td>9</td><td><b>Thread.list</b><br>è¿”å›å¤„äºè¿è¡ŒçŠ¶æ€æˆ–æŒ‚èµ·çŠ¶æ€çš„æ´»çº¿ç¨‹çš„æ•°ç»„ã€‚</td></tr> <tr><td>10</td><td><b>Thread.main</b><br>è¿”å›ä¸»çº¿ç¨‹ã€‚</td></tr> <tr><td>11</td><td><b>Thread.new( [ arg ]* ) {| args | block }</b><br>ç”Ÿæˆçº¿ç¨‹,å¹¶å¼€å§‹æ‰§è¡Œã€‚æ•°ä¼šè¢«åŸå°ä¸åŠ¨åœ°ä¼ é€’ç»™å—. è¿™å°±å¯ä»¥åœ¨å¯åŠ¨çº¿ç¨‹çš„åŒæ—¶,å°†å€¼ä¼ é€’ç»™è¯¥çº¿ç¨‹æ‰€å›ºæœ‰çš„å±€éƒ¨å˜é‡ã€‚</td></tr> <tr><td>12</td><td><b>Thread.pass</b><br>å°†è¿è¡Œæƒäº¤ç»™å…¶ä»–çº¿ç¨‹. å®ƒä¸ä¼šæ”¹å˜è¿è¡Œä¸­çš„çº¿ç¨‹çš„çŠ¶æ€,è€Œæ˜¯å°†æ§åˆ¶æƒäº¤ç»™å…¶ä»–å¯è¿è¡Œçš„çº¿ç¨‹(æ˜¾å¼çš„çº¿ç¨‹è°ƒåº¦)ã€‚</td></tr> <tr><td>13</td><td><b>Thread.start( [ args ]* ) {| args | block }</b><br>ç”Ÿæˆçº¿ç¨‹,å¹¶å¼€å§‹æ‰§è¡Œã€‚æ•°ä¼šè¢«åŸå°ä¸åŠ¨åœ°ä¼ é€’ç»™å—. è¿™å°±å¯ä»¥åœ¨å¯åŠ¨çº¿ç¨‹çš„åŒæ—¶,å°†å€¼ä¼ é€’ç»™è¯¥çº¿ç¨‹æ‰€å›ºæœ‰çš„å±€éƒ¨å˜é‡ã€‚</td></tr> <tr><td>14</td><td><b>Thread.stop</b><br>å°†å½“å‰çº¿ç¨‹æŒ‚èµ·,ç›´åˆ°å…¶ä»–çº¿ç¨‹ä½¿ç”¨runæ–¹æ³•å†æ¬¡å”¤é†’è¯¥çº¿ç¨‹ã€‚</td></tr> </tbody></table> <hr> <h2>çº¿ç¨‹å®ä¾‹åŒ–æ–¹æ³•</h2> <p>ä»¥ä¸‹å®ä¾‹è°ƒç”¨äº†çº¿ç¨‹å®ä¾‹åŒ–æ–¹æ³• joinï¼š</p> <pre>
#!/usr/bin/ruby

thr = Thread.new do   # å®ä¾‹åŒ–
   puts "In second thread"
   raise "Raise exception"
end
thr.join   # è°ƒç”¨å®ä¾‹åŒ–æ–¹æ³• join
</pre> <p>ä»¥ä¸‹æ˜¯å®Œæ•´å®ä¾‹åŒ–æ–¹æ³•åˆ—è¡¨ï¼š</p> <table class="reference"> <tbody><tr><th style="width:5%">åºå·</th><th>æ–¹æ³•æè¿°</th></tr> <tr><td>1</td><td><b>thr[ name ]</b><br>å–å‡ºçº¿ç¨‹å†…ä¸nameç›¸å¯¹åº”çš„å›ºæœ‰æ•°æ®ã€‚ nameå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–ç¬¦å·ã€‚ è‹¥æ²¡æœ‰ä¸nameç›¸å¯¹åº”çš„æ•°æ®æ—¶, è¿”å›nilã€‚</td></tr> <tr><td>2</td><td><b>thr[ name ] =</b><br>è®¾ç½®çº¿ç¨‹å†…nameç›¸å¯¹åº”çš„å›ºæœ‰æ•°æ®çš„å€¼ï¼Œ nameå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–ç¬¦å·ã€‚ è‹¥è®¾ä¸ºnilæ—¶, å°†åˆ é™¤è¯¥çº¿ç¨‹å†…å¯¹åº”æ•°æ®ã€‚</td></tr> <tr><td>3</td><td><b>thr.abort_on_exception</b><br>è¿”å›å¸ƒå°”å€¼ã€‚</td></tr> <tr><td>4</td><td><b>thr.abort_on_exception=</b><br>è‹¥å…¶å€¼ä¸ºtrueçš„è¯ï¼Œä¸€æ—¦æŸçº¿ç¨‹å› å¼‚å¸¸è€Œç»ˆæ­¢æ—¶ï¼Œæ•´ä¸ªè§£é‡Šå™¨å°±ä¼šè¢«ä¸­æ–­ã€‚</td></tr> <tr><td>5</td><td><b>thr.alive?</b><br>è‹¥çº¿ç¨‹æ˜¯"æ´»"çš„,å°±è¿”å›trueã€‚</td></tr> <tr><td>6</td><td><b>thr.exit</b><br>ç»ˆæ­¢çº¿ç¨‹çš„è¿è¡Œã€‚è¿”å›selfã€‚</td></tr> <tr><td>7</td><td><b>thr.join</b><br>æŒ‚èµ·å½“å‰çº¿ç¨‹,ç›´åˆ°selfçº¿ç¨‹ç»ˆæ­¢è¿è¡Œä¸ºæ­¢. è‹¥selfå› å¼‚å¸¸è€Œç»ˆæ­¢æ—¶, å°†ä¼šå½“å‰çº¿ç¨‹å¼•å‘åŒæ ·çš„å¼‚å¸¸ã€‚</td></tr> <tr><td>8</td><td><b>thr.key?</b><br>è‹¥ä¸nameç›¸å¯¹åº”çš„çº¿ç¨‹å›ºæœ‰æ•°æ®å·²ç»è¢«å®šä¹‰çš„è¯,å°±è¿”å›true</td></tr> <tr><td>9</td><td><b>thr.kill</b><br>ç±»ä¼¼äº <i>Thread.exit</i> ã€‚</td></tr> <tr><td>10</td><td><b>thr.priority</b><br>è¿”å›çº¿ç¨‹çš„ä¼˜å…ˆåº¦. ä¼˜å…ˆåº¦çš„é»˜è®¤å€¼ä¸º0. è¯¥å€¼è¶Šå¤§åˆ™ä¼˜å…ˆåº¦è¶Šé«˜.</td></tr> <tr><td>11</td><td><b>thr.priority=</b><br>è®¾å®šçº¿ç¨‹çš„ä¼˜å…ˆåº¦. ä¹Ÿå¯ä»¥å°†å…¶è®¾å®šä¸ºè´Ÿæ•°.</td></tr> <tr><td>12</td><td><b>thr.raise( anException )</b><br>åœ¨è¯¥çº¿ç¨‹å†…å¼ºè¡Œå¼•å‘å¼‚å¸¸.</td></tr> <tr><td>13</td><td><b>thr.run</b><br>é‡æ–°å¯åŠ¨è¢«æŒ‚èµ·(stop)çš„çº¿ç¨‹. ä¸wakeupä¸åŒçš„æ˜¯,å®ƒå°†ç«‹å³è¿›è¡Œçº¿ç¨‹çš„åˆ‡æ¢. è‹¥å¯¹æ­»è¿›ç¨‹ä½¿ç”¨è¯¥æ–¹æ³•æ—¶, å°†å¼•å‘ThreadErrorå¼‚å¸¸.</td></tr> <tr><td>14</td><td><b>thr.safe_level</b><br>è¿”å›self çš„å®‰å…¨ç­‰çº§. å½“å‰çº¿ç¨‹çš„safe_levelä¸$SAFEç›¸åŒ.</td></tr> <tr><td>15</td><td><b>thr.status</b><br>ä½¿ç”¨å­—ç¬¦ä¸²"run"ã€"sleep"æˆ–"aborting" æ¥è¡¨ç¤ºæ´»çº¿ç¨‹çš„çŠ¶æ€. è‹¥æŸçº¿ç¨‹æ˜¯æ­£å¸¸ç»ˆæ­¢çš„è¯,å°±è¿”å›false. è‹¥å› å¼‚å¸¸è€Œç»ˆæ­¢çš„è¯,å°±è¿”å›nilã€‚</td></tr> <tr><td>16</td><td><b>thr.stop?</b><br>è‹¥çº¿ç¨‹å¤„äºç»ˆæ­¢çŠ¶æ€(dead)æˆ–è¢«æŒ‚èµ·(stop)æ—¶,è¿”å›true.</td></tr> <tr><td>17</td><td><b>thr.value</b><br>ä¸€ç›´ç­‰åˆ°selfçº¿ç¨‹ç»ˆæ­¢è¿è¡Œ(ç­‰åŒäºjoin)å,è¿”å›è¯¥çº¿ç¨‹çš„å—çš„è¿”å›å€¼. è‹¥åœ¨çº¿ç¨‹çš„è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†å¼‚å¸¸, å°±ä¼šå†æ¬¡å¼•å‘è¯¥å¼‚å¸¸.</td></tr> <tr><td>18</td><td><b>thr.wakeup</b><br>æŠŠè¢«æŒ‚èµ·(stop)çš„çº¿ç¨‹çš„çŠ¶æ€æ”¹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(run), è‹¥å¯¹æ­»çº¿ç¨‹æ‰§è¡Œè¯¥æ–¹æ³•æ—¶,å°†ä¼šå¼•å‘ThreadErrorå¼‚å¸¸ã€‚</td></tr> </tbody></table> </div> <div class="chapter"> <div class="prev">&laquo; <a href="ruby-web-services.html" tppabs="http://www.w3cschool.cc/ruby/ruby-web-services.html" rel="prev"> Ruby Web Services åº”ç”¨ &#8211; SOAP4R</a></div> <div class="next"></div> </div> </div> <div id="rightcolumn"> <div class="rightad"> <a href="../w3cnote.htm" tppabs="http://www.w3cschool.cc/w3cnote" target="_blank" style="border-top: 2px;"/> <img src="../wp-content/themes/w3cschool.cc/assets/img/logo-2.png" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/logo-2.png"> </a> </div> <div class="rightad"> <h2 style="color:#67ad03">å…³æ³¨å¾®ä¿¡ä¸‹è½½ç¦»çº¿æ‰‹å†Œ</h2> <a href="javascript:if(confirm('http://m.w3cschool.cc/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://m.w3cschool.cc/'" tppabs="http://m.w3cschool.cc/" target="_blank"/> <img src="../wp-content/themes/w3cschool.cc/assets/img/qrcode.jpg" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/qrcode.jpg" width="150" height="150" alt="w3cschoolç§»åŠ¨ç‰ˆ"/> </a> <a target="_blank" href="javascript:if(confirm('http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9'" tppabs="http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9"><img border="0" src="../../pub.idqqimg.com/wpa/images/group.png" tppabs="http://pub.idqqimg.com/wpa/images/group.png" alt="w3cschool.ccèœé¸Ÿå®¶æ—" title="w3cschool.ccèœé¸Ÿå®¶æ—"></a> </div> <div class="rightad"> <h2>å‚è€ƒæ‰‹å†Œ</h2> <a href="../tags/html-reference.html" tppabs="http://www.w3cschool.cc/tags/html-reference.html" title="HTML 4">HTML å‚è€ƒæ‰‹å†Œ</a> <a href="../jsref/jsref-tutorial.html" tppabs="http://www.w3cschool.cc/jsref/jsref-tutorial.html" title="CSS å‚è€ƒæ‰‹å†Œ">JS å‚è€ƒæ‰‹å†Œ</a> <a href="../cssref/css-reference.html" tppabs="http://www.w3cschool.cc/cssref/css-reference.html" title="CSS å‚è€ƒæ‰‹å†Œ">CSS å‚è€ƒæ‰‹å†Œ</a> <a href="javascript:if(confirm('http://jsbin.w3cschool.cc/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://jsbin.w3cschool.cc/'" tppabs="http://jsbin.w3cschool.cc/" target="_blank" title="jsonæ ¼å¼å·¥å…·"/>HTML/CSS/JS åœ¨çº¿å·¥å…·</a> <a href="../jsontool.htm" tppabs="http://www.w3cschool.cc/jsontool" target="_blank" title="jsonæ ¼å¼å·¥å…·"/>JSON æ ¼å¼å·¥å…·</a> <a href="../coder-learn-path.htm" tppabs="http://www.w3cschool.cc/coder-learn-path" target="_blank"/>ç¨‹åºçŒ¿å­¦ä¹ è·¯çº¿</a> <a href="../chmproblem.htm" tppabs="http://www.w3cschool.cc/chmproblem" target="_blank"/>æ‰“å¼€CHMæ–‡æ¡£é‡åˆ°é—®é¢˜â€¦â€¦</a> <a href="javascript:if(confirm('http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w'" tppabs="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w" rel="nofollow" target="_blank" title="é—®é¢˜/æ„è§åé¦ˆ"/>é—®é¢˜/æ„è§åé¦ˆ</a> </div> <div class="wideSkyscraper"> <script async src="../../pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" tppabs="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-5751451760833794" data-ad-slot="4106274865"></ins> <script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script> </div> </div> <div style="clear:both;"></div> <div id="footer"> <br> <hr style="height:2px;"> <div id="footerImg"><a href="../index.htm" tppabs="http://www.w3cschool.cc/"> <img style="border:0" src="../wp-content/themes/w3cschool.cc/assets/img/w3cschoolcc_gray.gif" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/w3cschoolcc_gray.gif" alt="W3Cschool.cc"/></a> </div> <div id="footerAbout"> <a href="../w3cnote.htm" tppabs="http://www.w3cschool.cc/w3cnote">W3Cèœé¸Ÿç¬”è®°</a> <a href="../disclaimer.htm" tppabs="http://www.w3cschool.cc/disclaimer">å…è´£å£°æ˜</a> <a href="../aboutus.htm" tppabs="http://www.w3cschool.cc/aboutus">å…³äºæˆ‘ä»¬</a> </ul> </div> <div id="footerText"> æä¾›çš„å†…å®¹ä»…ç”¨äºåŸ¹è®­ã€‚æˆ‘ä»¬ä¸ä¿è¯å†…å®¹çš„æ­£ç¡®æ€§ã€‚é€šè¿‡ä½¿ç”¨æœ¬ç«™å†…å®¹éšä¹‹è€Œæ¥çš„é£é™©ä¸æœ¬ç«™æ— å…³ã€‚å½“ä½¿ç”¨æœ¬ç«™æ—¶ï¼Œä»£è¡¨æ‚¨å·²æ¥å—äº†æœ¬ç«™çš„ä½¿ç”¨æ¡æ¬¾å’Œéšç§æ¡æ¬¾ã€‚ ç‰ˆæƒæ‰€æœ‰ï¼Œä¿ç•™ä¸€åˆ‡æƒåˆ©ã€‚W3CSchool ç®€ä½“ä¸­æ–‡ç‰ˆçš„æ‰€æœ‰å†…å®¹ä»…ä¾›æµ‹è¯•ï¼Œå¯¹ä»»ä½•æ³•å¾‹é—®é¢˜åŠé£é™©ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ </div> </div> </div> </div> <a class="backtop" href="javascript:void"></a> <div style="display:none;"> <script src="../../s11.cnzz.com/stat.php-id=5578006&web_id=5578006" tppabs="http://s11.cnzz.com/stat.php?id=5578006&web_id=5578006" language="JavaScript"></script> </div> <div class="share-box"> <div class="share-box-top">åˆ†äº«åˆ°</div> <div class="share-box-inner"> <div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"> <a class="bds_qzone" title="åˆ†äº«åˆ°QQç©ºé—´" href="#"></a> <a class="bds_tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš" href="#"></a> <a class="bds_tqq" title="åˆ†äº«åˆ°äººäººç½‘" href="#"></a> <a class="bds_baidu" title="ç™¾åº¦æ”¶è—" href="#"></a> <span class="bds_more">æ›´å¤š</span> <a class="shareCount" id="shareCount" href="#" title="ç´¯è®¡åˆ†äº«0æ¬¡">0</a> </div> </div> <div class="share-box-bottom"></div> </div> <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=470751" ></script> <script type="text/javascript" id="bdshell_js"></script> <script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script> <script>
function NewWindow(text)
{
  win=window.open(text,'','top=0,left=0,width=400,height=350');
}
$(function() { 
	color_flag = false; //é…è‰²æ ‡è®°
	prev_title_flag = false;
	next_title_flag = false;
 	href = window.location.href;
	console.log('href', href);
	$("#leftcolumn").find("a").each(function(){
		if(next_title_flag) {
				return false; //ç»“æŸå¾ªç¯
		} 
		cur_href = $(this).attr("href");
		cur_obj = $(this);
		
		if(href.match(cur_href) != null) {
			
			if(cur_href.indexOf('/') == -1) { //ç¬¬äºŒé‡åˆ¤æ–­
				tmp_url = href.substring(0, href.lastIndexOf('/')+1) + cur_href;
				console.log('tmp_url', tmp_url);
				if(href != tmp_url) return;
			}
			if(!color_flag) {
				$(this).css("font-weight", "bold");
				color_flag = true;
			}
			prev_href = $(this).prev("a").attr("href");
			prev_title = $(this).prev("a").attr("title");
			if(!prev_title) prev_title=$(this).prev("a").text();
			next_href = $(this).next("a").attr("href");
			next_title = $(this).next("a").attr("title");
			if(!next_title) next_title=$(this).next("a").text();
			if(!prev_title_flag) {
				if( prev_title ) {
					$(".prev a").attr("href", prev_href);
					$(".prev a").attr("title", prev_title);
					$(".prev a").text( prev_title);
				} else {
					if(typeof(prev_obj) != 'undefined') {
						prev_href = prev_obj.attr("href");
						prev_title = prev_obj.attr("title");
						if(!prev_title) prev_title=prev_obj.text();
						if(prev_title) {
							$(".prev a").attr("href", prev_href);
							$(".prev a").attr("title", prev_title);
							$(".prev a").text( prev_title);
						}
					}
					
				}
				prev_title_flag = true;
			}
			if(next_title) {
				if($(".next a").attr("href")) {
					$(".next a").attr("href", next_href);
					$(".next a").attr("title", next_title);
					$(".next a").text( next_title);
				} else {
					$(".next").html("<a href=\"" + next_href + "\" rel=\"next\" title=\"" + next_title + "\">" + next_title + "</a> &raquo;");
				}
				
				next_title_flag = true;
				
			}
			console.log(prev_href,prev_title);
			console.log(next_href,next_title);
			//return false; 
		} else {
			prev_obj = cur_obj;
			if(next_title_flag) {
				return false;
			} else {
				if(prev_title_flag) {
					next_href = $(this).attr("href");
					next_title = $(this).attr("title");
					if(!next_title) next_title=$(this).text();
					if(next_title) {
						if($(".next a").attr("href")) {
							$(".next a").attr("href", next_href);
							$(".next a").attr("title", next_title);
							$(".next a").text( next_title);
						} else {
							$(".next").html("<a href=\"" + next_href + "\" rel=\"next\" title=\"" + next_title + "\">" + next_title + "</a> &raquo;");
						}
						next_title_flag = true;
					}
				}
			}
		}
		
  });
  
  	$(window).scroll(function () {
        if($(window).scrollTop()>=100) {
            $(".backtop").fadeIn();
        }else {
        	
        		$(".backtop").fadeOut();
        }
    });
	

	$(".backtop").click(function(event){	
		$('html,body').animate({scrollTop:0}, 500);
		return false;
	});
		
});
var host = window.location.host;
if (/(iPhone|iPad|iPod|iOS|BlackBerry|IEMobile|Android)/i.test(navigator.userAgent)) {

    if(host == 'http://www.w3cschool.cc/ruby/www.w3cschool.cc') {
		href = window.location.href;
		href=href.replace(/www.w3cschool.cc/, "http://www.w3cschool.cc/ruby/m.w3cschool.cc");
		window.location.href=href;
	}
}
</script> </body> </html>