<!Doctype html> <html xmlns=http://www.w3.org/1999/xhtml> <head> <meta charset="UTF-8"> <title>Ruby æ•°æ®åº“è®¿é—® &#8211; DBI æ•™ç¨‹ | w3cschoolèœé¸Ÿæ•™ç¨‹</title> <link rel='prev' title='Ruby æ­£åˆ™è¡¨è¾¾å¼' href="ruby-regular-expressions.html"/> <link rel='next' title='Ruby DBI Read æ“ä½œ' href="ruby-dbi-read.html"/> <link rel='canonical' href='http://www.w3cschool.cc/ruby/ruby-database-access.html'/> <meta name="keywords" content="Ruby æ•°æ®åº“è®¿é—® &#8211; DBI æ•™ç¨‹"> <meta name="description" content="Ruby æ•°æ®åº“è®¿é—® - DBI æ•™ç¨‹ æœ¬ç« èŠ‚å°†å‘æ‚¨è®²è§£å¦‚ä½•ä½¿ç”¨ Ruby è®¿é—®æ•°æ®åº“ã€‚Ruby DBI æ¨¡å—ä¸º Ruby è„šæœ¬æä¾›äº†ç±»ä¼¼äº Perl DBI æ¨¡å—çš„ç‹¬ç«‹äºæ•°æ®åº“çš„æ¥å£ã€‚ DBI å³ Database independent interfaceï¼Œä»£è¡¨äº† Ruby ç‹¬ç«‹äºæ•°æ®åº“çš„æ¥å£ã€‚DBI åœ¨ Ruby ä»£ç ä¸åº•å±‚æ•°æ®åº“ä¹‹é—´æä¾›äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå…è®¸æ‚¨ç®€å•åœ°å®ç°æ•°æ®åº“åˆ‡æ¢ã€‚å®ƒå®šä¹‰äº†ä¸€ç³»åˆ—æ–¹æ³•ã€å˜é‡å’Œè§„èŒƒï¼Œæä¾›äº†ä¸€ä¸ªç‹¬ç«‹äº.."> <!--[if lt IE 7]> <style> #leftcolumn{margin-left:0} </style> <![endif]--> <link rel="shortcut icon" href="../favicon.ico" tppabs="http://www.w3cschool.cc/favicon.ico" mce_href="/favicon.ico" type="image/x-icon"> <script src="../../libs.baidu.com/jquery/1.8.1/jquery.min.js" tppabs="http://libs.baidu.com/jquery/1.8.1/jquery.min.js"></script> <link rel="stylesheet" type="text/css" href="../wp-content/themes/w3cschool.cc/assets/css/stdtheme.css-1.04.css" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/css/stdtheme.css?1.04"> </head> <body> <div id="top"> <div style="height:78px;"> <div id="topLogo"> <a id="top"></a> <a href="../index.htm" tppabs="http://www.w3cschool.cc/" title="w3cschoolèœé¸Ÿæ•™ç¨‹"><img width="336" height="69" src="../wp-content/themes/w3cschool.cc/assets/img/logo.png" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/logo.png" alt="W3CSchool.cc" style="border:0;margin-top:5px;"/></a> </div> <div id="searchTranslate"> <div id="searchText">Search w3cschool.cc:</div> <div id="googleSearch"> <form name="cse" id="searchbox_demo" action="http://wen.lu/search" target="_blank"> <input type="hidden" name="cref"/> <input type="hidden" name="ie" value="utf-8"/> <input type="hidden" name="hl"/> <input type="hidden" name="sitesearch" value="w3cschool.cc"> <input name="as_q" type="text" size="20"/> <input type="submit" name="sa" value="æœç´¢"/> </form> </div> </div> </div> <div id="topnav"> <div id="topnavTut"> <a href="../index.htm" tppabs="http://www.w3cschool.cc/">é¦–é¡µ</a> <a href="../html/html-tutorial.html" tppabs="http://www.w3cschool.cc/html/html-tutorial.html">HTML</a> <a href="../css/css-tutorial.html" tppabs="http://www.w3cschool.cc/css/css-tutorial.html">CSS</a> <a href="../js/js-tutorial.html" tppabs="http://www.w3cschool.cc/js/js-tutorial.html">JavaScript</a> <a href="../jquery/jquery-tutorial.html" tppabs="http://www.w3cschool.cc/jquery/jquery-tutorial.html">jQuery</a> <a href="../jqueryui/jqueryui-tutorial.html" tppabs="http://www.w3cschool.cc/jqueryui/jqueryui-tutorial.html">jQueryUI</a> <a href="../bootstrap/bootstrap-tutorial.html" tppabs="http://www.w3cschool.cc/bootstrap/bootstrap-tutorial.html">Bootstrap</a> <a href="../jquerymobile/jquerymobile-tutorial.html" tppabs="http://www.w3cschool.cc/jquerymobile/jquerymobile-tutorial.html">jMobile</a> <a href="../jeasyui/jqueryeasyui-tutorial.html" tppabs="http://www.w3cschool.cc/jeasyui/jqueryeasyui-tutorial.html">EasyUI</a> <a href="../xml/xml-tutorial.html" tppabs="http://www.w3cschool.cc/xml/xml-tutorial.html">XML</a> <a href="../sql/sql-tutorial.html" tppabs="http://www.w3cschool.cc/sql/sql-tutorial.html">SQL</a> <a href="../mysql/mysql-tutorial.html" tppabs="http://www.w3cschool.cc/mysql/mysql-tutorial.html">MySQL</a> <a href="../sqlite/sqlite-tutorial.html" tppabs="http://www.w3cschool.cc/sqlite/sqlite-tutorial.html">SQLite</a> <a href="../php/php-tutorial.html" tppabs="http://www.w3cschool.cc/php/php-tutorial.html">PHP</a> <a href="../csharp/csharp-tutorial.html" tppabs="http://www.w3cschool.cc/csharp/csharp-tutorial.html">C#</a> <a href="../python/python-tutorial.html" tppabs="http://www.w3cschool.cc/python/python-tutorial.html">Python</a> <a href="../java/java-tutorial.html" tppabs="http://www.w3cschool.cc/java/java-tutorial.html">Java</a> <a href="../jsp/jsp-tutorial.html" tppabs="http://www.w3cschool.cc/jsp/jsp-tutorial.html">JSP</a> <a href="ruby-tutorial.html" tppabs="http://www.w3cschool.cc/ruby/ruby-tutorial.html">Ruby</a> <a href="../css-radius.htm" tppabs="http://www.w3cschool.cc/css-radius">å‰ç«¯å·¥å…·</a> <a href="../sitemap.htm" tppabs="http://www.w3cschool.cc/sitemap">æ›´å¤šâ€¦â€¦</a> </div> <div id="topnavAbout"> </div> </div> <div id="page"> <div style="clear:both;"></div> <div id="leftcolumn"> <h2 class="left"><strong>Ruby æ•™ç¨‹</strong></h2> <a target="_top" title="Ruby æ•™ç¨‹" href="ruby-tutorial.html" tppabs="http://www.w3cschool.cc/ruby/ruby-tutorial.html"> Ruby æ•™ç¨‹ </a> <a target="_top" title="Ruby ç®€ä»‹" href="ruby-intro.html" tppabs="http://www.w3cschool.cc/ruby/ruby-intro.html"> Ruby ç®€ä»‹ </a> <a target="_top" title="Ruby ç¯å¢ƒ" href="ruby-environment.html" tppabs="http://www.w3cschool.cc/ruby/ruby-environment.html"> Ruby ç¯å¢ƒ </a> <a target="_top" title="Ruby å®‰è£… &#8211; Unix" href="ruby-installation-unix.html" tppabs="http://www.w3cschool.cc/ruby/ruby-installation-unix.html"> Ruby å®‰è£… - Unix </a> <a target="_top" title="Ruby å®‰è£… &#8211; Windows" href="ruby-installation-windows.html" tppabs="http://www.w3cschool.cc/ruby/ruby-installation-windows.html"> Ruby å®‰è£… - Windows </a> <a target="_top" title="Ruby å‘½ä»¤è¡Œé€‰é¡¹" href="ruby-command-line-options.html" tppabs="http://www.w3cschool.cc/ruby/ruby-command-line-options.html"> Ruby å‘½ä»¤è¡Œé€‰é¡¹ </a> <a target="_top" title="Ruby ç¯å¢ƒå˜é‡" href="ruby-environment-variables.html" tppabs="http://www.w3cschool.cc/ruby/ruby-environment-variables.html"> Ruby ç¯å¢ƒå˜é‡ </a> <a target="_top" title="Ruby è¯­æ³•" href="ruby-syntax.html" tppabs="http://www.w3cschool.cc/ruby/ruby-syntax.html"> Ruby è¯­æ³• </a> <a target="_top" title="Ruby ç±»å’Œå¯¹è±¡" href="ruby-class.html" tppabs="http://www.w3cschool.cc/ruby/ruby-class.html"> Ruby ç±»å’Œå¯¹è±¡ </a> <a target="_top" title="Ruby ç±»æ¡ˆä¾‹" href="ruby-class-case-study.html" tppabs="http://www.w3cschool.cc/ruby/ruby-class-case-study.html"> Ruby ç±»æ¡ˆä¾‹ </a> <a target="_top" title="Ruby å˜é‡" href="ruby-variable.html" tppabs="http://www.w3cschool.cc/ruby/ruby-variable.html"> Ruby å˜é‡ </a> <a target="_top" title="Ruby è¿ç®—ç¬¦" href="ruby-operator.html" tppabs="http://www.w3cschool.cc/ruby/ruby-operator.html"> Ruby è¿ç®—ç¬¦ </a> <a target="_top" title="Ruby æ³¨é‡Š" href="ruby-comment.html" tppabs="http://www.w3cschool.cc/ruby/ruby-comment.html"> Ruby æ³¨é‡Š </a> <a target="_top" title="Ruby åˆ¤æ–­" href="ruby-decision.html" tppabs="http://www.w3cschool.cc/ruby/ruby-decision.html"> Ruby åˆ¤æ–­ </a> <a target="_top" title="Ruby å¾ªç¯" href="ruby-loop.html" tppabs="http://www.w3cschool.cc/ruby/ruby-loop.html"> Ruby å¾ªç¯ </a> <a target="_top" title="Ruby æ–¹æ³•" href="ruby-method.html" tppabs="http://www.w3cschool.cc/ruby/ruby-method.html"> Ruby æ–¹æ³• </a> <a target="_top" title="Ruby å—" href="ruby-block.html" tppabs="http://www.w3cschool.cc/ruby/ruby-block.html"> Ruby å— </a> <a target="_top" title="Ruby æ¨¡å—ï¼ˆModuleï¼‰" href="ruby-module.html" tppabs="http://www.w3cschool.cc/ruby/ruby-module.html"> Ruby æ¨¡å—ï¼ˆModuleï¼‰ </a> <a target="_top" title="Ruby å­—ç¬¦ä¸²ï¼ˆStringï¼‰" href="ruby-string.html" tppabs="http://www.w3cschool.cc/ruby/ruby-string.html"> Ruby å­—ç¬¦ä¸²ï¼ˆStringï¼‰ </a> <a target="_top" title="Ruby æ•°ç»„ï¼ˆArrayï¼‰" href="ruby-array.html" tppabs="http://www.w3cschool.cc/ruby/ruby-array.html"> Ruby æ•°ç»„ï¼ˆArrayï¼‰ </a> <a target="_top" title="Ruby å“ˆå¸Œï¼ˆHashï¼‰" href="ruby-hash.html" tppabs="http://www.w3cschool.cc/ruby/ruby-hash.html"> Ruby å“ˆå¸Œï¼ˆHashï¼‰ </a> <a target="_top" title="Ruby æ—¥æœŸ &#038; æ—¶é—´ï¼ˆDate &#038; Timeï¼‰" href="ruby-date-time.html" tppabs="http://www.w3cschool.cc/ruby/ruby-date-time.html"> Ruby æ—¥æœŸ & æ—¶é—´ </a> <a target="_top" title="Ruby èŒƒå›´ï¼ˆRangeï¼‰" href="ruby-range.html" tppabs="http://www.w3cschool.cc/ruby/ruby-range.html"> Ruby èŒƒå›´ï¼ˆRangeï¼‰ </a> <a target="_top" title="Ruby è¿­ä»£å™¨" href="ruby-iterators.html" tppabs="http://www.w3cschool.cc/ruby/ruby-iterators.html"> Ruby è¿­ä»£å™¨ </a> <a target="_top" title="Ruby æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º" href="ruby-input-output.html" tppabs="http://www.w3cschool.cc/ruby/ruby-input-output.html"> Ruby æ–‡ä»¶çš„è¾“å…¥ä¸è¾“å‡º </a> <a target="_top" title="Ruby File ç±»å’Œæ–¹æ³•" href="ruby-file-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-file-methods.html"> Ruby File ç±»å’Œæ–¹æ³• </a> <a target="_top" title="Ruby Dir ç±»å’Œæ–¹æ³•" href="ruby-dir-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-dir-methods.html"> Ruby Dir ç±»å’Œæ–¹æ³• </a> <a target="_top" title="Ruby å¼‚å¸¸" href="ruby-exceptions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-exceptions.html"> Ruby å¼‚å¸¸ </a> <br><h2 class="left"><span class="left_h2">Ruby</span> é«˜çº§æ•™ç¨‹</h2> <a target="_top" title="Ruby é¢å‘å¯¹è±¡" href="ruby-object-oriented.html" tppabs="http://www.w3cschool.cc/ruby/ruby-object-oriented.html"> Ruby é¢å‘å¯¹è±¡ </a> <a target="_top" title="Ruby æ­£åˆ™è¡¨è¾¾å¼" href="ruby-regular-expressions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-regular-expressions.html"> Ruby æ­£åˆ™è¡¨è¾¾å¼ </a> <a target="_top" title="Ruby æ•°æ®åº“è®¿é—® &#8211; DBI æ•™ç¨‹" href="ruby-database-access.html" tppabs="http://www.w3cschool.cc/ruby/ruby-database-access.html"> Ruby æ•°æ®åº“è®¿é—® - DBI æ•™ç¨‹ </a> <a target="_top" title="Ruby CGI ç¼–ç¨‹" href="ruby-cgi.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi.html"> Ruby CGI ç¼–ç¨‹ </a> <a target="_top" title="Ruby CGIæ–¹æ³•" href="ruby-cgi-methods.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-methods.html"> Ruby CGIæ–¹æ³• </a> <a target="_top" title="Ruby CGI Cookies" href="ruby-cgi-cookies.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-cookies.html"> Ruby CGI Cookies </a> <a target="_top" title="Ruby CGI Sessions" href="ruby-cgi-sessions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-cgi-sessions.html"> Ruby CGI Sessions </a> <a target="_top" title="Ruby å‘é€é‚®ä»¶ &#8211; SMTP" href="ruby-sending-email.html" tppabs="http://www.w3cschool.cc/ruby/ruby-sending-email.html"> Ruby å‘é€é‚®ä»¶ - SMTP </a> <a target="_top" title="Ruby Socket ç¼–ç¨‹" href="ruby-socket-programming.html" tppabs="http://www.w3cschool.cc/ruby/ruby-socket-programming.html"> Ruby Socket ç¼–ç¨‹ </a> <a target="_top" title="Ruby XML, XSLT å’Œ XPath æ•™ç¨‹" href="ruby-xml-xslt-xpath.html" tppabs="http://www.w3cschool.cc/ruby/ruby-xml-xslt-xpath.html"> Ruby XML, XSLT å’Œ XPath æ•™ç¨‹ </a> <a target="_top" title="Ruby Web Services åº”ç”¨ &#8211; SOAP4R" href="ruby-web-services.html" tppabs="http://www.w3cschool.cc/ruby/ruby-web-services.html"> Ruby Web Services </a> <a target="_top" title="Ruby å¤šçº¿ç¨‹" href="ruby-multithreading.html" tppabs="http://www.w3cschool.cc/ruby/ruby-multithreading.html"> Ruby å¤šçº¿ç¨‹ </a> </div><div id="main"> <div id="mainLeaderboard"> <div style="width:728px;height:90px;float:right;"> <script async src="../../pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" tppabs="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-5751451760833794" data-ad-slot="2542143260"></ins> <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> </div> </div> <div class="chapter"> <div class="prev">&laquo; <a href="ruby-regular-expressions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-regular-expressions.html" rel="prev"> Ruby æ­£åˆ™è¡¨è¾¾å¼</a></div> <div class="next"><a href="javascript:if(confirm('http://www.w3cschool.cc/ruby/try.php?filename=tryjs_continue  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ²»¿ÉÓÃ, »ò·ÅÆúÁËÏÂÔØ, »òÏîÄ¿¼´½«Í£Ö¹¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.w3cschool.cc/ruby/try.php?filename=tryjs_continue'" tppabs="http://www.w3cschool.cc/ruby/ruby-dbi-read.html" rel="next">Ruby DBI Read æ“ä½œ</a> &raquo;</div> </div> <div id="content"> <h1>Ruby <span class="color_h1">æ•°æ®åº“è®¿é—® - DBI æ•™ç¨‹</span></h1> <div class="tutintro"> <p>æœ¬ç« èŠ‚å°†å‘æ‚¨è®²è§£å¦‚ä½•ä½¿ç”¨ Ruby è®¿é—®æ•°æ®åº“ã€‚<i>Ruby DBI</i> æ¨¡å—ä¸º Ruby è„šæœ¬æä¾›äº†ç±»ä¼¼äº Perl DBI æ¨¡å—çš„ç‹¬ç«‹äºæ•°æ®åº“çš„æ¥å£ã€‚</p> <p>DBI å³ Database independent interfaceï¼Œä»£è¡¨äº† Ruby ç‹¬ç«‹äºæ•°æ®åº“çš„æ¥å£ã€‚DBI åœ¨ Ruby ä»£ç ä¸åº•å±‚æ•°æ®åº“ä¹‹é—´æä¾›äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå…è®¸æ‚¨ç®€å•åœ°å®ç°æ•°æ®åº“åˆ‡æ¢ã€‚å®ƒå®šä¹‰äº†ä¸€ç³»åˆ—æ–¹æ³•ã€å˜é‡å’Œè§„èŒƒï¼Œæä¾›äº†ä¸€ä¸ªç‹¬ç«‹äºæ•°æ®åº“çš„ä¸€è‡´çš„æ•°æ®åº“æ¥å£ã€‚</p> <p>DBI å¯ä¸ä¸‹åˆ—è¿›è¡Œäº¤äº’ï¼š</p> <ul class="list"> <li>ADO (ActiveX Data Objects)</li> <li>DB2</li> <li>Frontbase</li> <li>mSQL</li> <li>MySQL</li> <li>ODBC</li> <li>Oracle</li> <li>OCI8 (Oracle)</li> <li>PostgreSQL</li> <li>Proxy/Server</li> <li>SQLite</li> <li>SQLRelay</li> </ul> </div> <h2 class="tutheader">DBI åº”ç”¨æ¶æ„</h2> <p>DBI ç‹¬ç«‹äºä»»ä½•åœ¨åå°ä¸­å¯ç”¨çš„æ•°æ®åº“ã€‚æ— è®ºæ‚¨ä½¿ç”¨çš„æ˜¯ Oracleã€MySQLã€Informixï¼Œæ‚¨éƒ½å¯ä»¥ä½¿ç”¨ DBIã€‚ä¸‹é¢çš„æ¶æ„å›¾æ¸…æ™°åœ°è¯´æ˜äº†è¿™ç‚¹ã€‚</p> <img src="../wp-content/uploads/2014/05/try.php-filename=tryjs_object_for_in" tppabs="http://www.w3cschool.cc/wp-content/uploads/2014/05/ruby_dbi.jpg" alt="Ruby DBI æ¶æ„"/> <p>Ruby DBI ä¸€èˆ¬çš„æ¶æ„ä½¿ç”¨ä¸¤ä¸ªå±‚ï¼š</p> <ul class="list"> <li>æ•°æ®åº“æ¥å£ï¼ˆDBIï¼‰å±‚ã€‚è¯¥å±‚æ˜¯ç‹¬ç«‹äºæ•°æ®åº“ï¼Œå¹¶æä¾›äº†ä¸€ç³»åˆ—å…¬å…±è®¿é—®æ–¹æ³•ï¼Œæ–¹æ³•çš„ä½¿ç”¨ä¸åˆ†æ•°æ®åº“æœåŠ¡å™¨ç±»å‹ã€‚</li> <li>æ•°æ®åº“é©±åŠ¨ï¼ˆDBDï¼‰å±‚ã€‚è¯¥å±‚æ˜¯ä¾èµ–äºæ•°æ®åº“ï¼Œä¸åŒçš„é©±åŠ¨æä¾›äº†å¯¹ä¸åŒçš„æ•°æ®åº“å¼•æ“çš„è®¿é—®ã€‚MySQLã€PostgreSQLã€InterBaseã€Oracle ç­‰åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„é©±åŠ¨ã€‚æ¯ä¸ªé©±åŠ¨éƒ½è´Ÿè´£è§£é‡Šæ¥è‡ª DBI å±‚çš„è¯·æ±‚ï¼Œå¹¶æŠŠè¿™äº›è¯·æ±‚æ˜ å°„ä¸ºé€‚ç”¨äºç»™å®šç±»å‹çš„æ•°æ®åº“æœåŠ¡å™¨çš„è¯·æ±‚ã€‚</li> </ul> <h2 class="tutheader">å…ˆå†³æ¡ä»¶</h2> <p>å¦‚æœæ‚¨æƒ³è¦ç¼–å†™ Ruby è„šæœ¬æ¥è®¿é—® MySQL æ•°æ®åº“ï¼Œæ‚¨éœ€è¦å…ˆå®‰è£… Ruby MySQL æ¨¡å—ã€‚</p> <p>è¯¥æ¨¡å—æ˜¯ä¸€ä¸ª DBDï¼Œå¯ä» <a href="javascript:if(confirm('http://www.tmtm.org/en/mysql/ruby/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.tmtm.org/en/mysql/ruby/'" tppabs="http://www.tmtm.org/en/mysql/ruby/" target="_blank">http://www.tmtm.org/en/mysql/ruby/</a> ä¸Šä¸‹è½½ã€‚</p> <h2 class="tutheader">è·å–å¹¶å®‰è£… Ruby/DBI</h2> <p>æ‚¨å¯ä»¥ä»ä¸‹é¢çš„é“¾æ¥ä¸‹è½½å¹¶å®‰è£… Ruby DBI æ¨¡å—ï¼š</p> <table class="reference notranslate"> <tr><td> <a href="javascript:if(confirm('http://rubyforge.org/projects/ruby-dbi/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://rubyforge.org/projects/ruby-dbi/'" tppabs="http://rubyforge.org/projects/ruby-dbi/" target="_blank">http://rubyforge.org/projects/ruby-dbi/</a> </td></tr> </table> <p>åœ¨å¼€å§‹å®‰è£…ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æ‹¥æœ‰ root æƒé™ã€‚ç°åœ¨ï¼Œè¯·å®‰è£…ä¸‹é¢çš„æ­¥éª¤è¿›è¡Œå®‰è£…ï¼š</p> <h2>æ­¥éª¤ 1</h2> <pre class="prettyprint">
$ tar zxf dbi-0.2.0.tar.gz
</pre> <h2>æ­¥éª¤ 2</h2> <p>è¿›å…¥ç›®å½• <i>dbi-0.2.0</i>ï¼Œåœ¨ç›®å½•ä¸­ä½¿ç”¨ <i>setup.rb</i> è„šæœ¬è¿›è¡Œé…ç½®ã€‚æœ€å¸¸ç”¨çš„é…ç½®å‘½ä»¤æ˜¯ config å‚æ•°åä¸è·Ÿä»»ä½•å‚æ•°ã€‚è¯¥å‘½ä»¤é»˜è®¤é…ç½®ä¸ºå®‰è£…æ‰€æœ‰çš„é©±åŠ¨ã€‚</p> <pre class="prettyprint">
$ ruby setup.rb config
</pre> <p>æ›´å…·ä½“åœ°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ --with é€‰é¡¹æ¥åˆ—å‡ºäº†æ‚¨è¦ä½¿ç”¨çš„ç‰¹å®šéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåªæƒ³é…ç½®ä¸»è¦çš„ DBI æ¨¡å—å’Œ MySQL DBD å±‚é©±åŠ¨ï¼Œè¯·è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š</p> <pre class="prettyprint">
$ ruby setup.rb config --with=dbi,dbd_mysql
</pre> <h2>æ­¥éª¤ 3</h2> <p>æœ€åä¸€æ­¥æ˜¯å»ºç«‹é©±åŠ¨å™¨ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p> <pre class="prettyprint">
$ ruby setup.rb setup
$ ruby setup.rb install
</pre> <h2 class="tutheader">æ•°æ®åº“è¿æ¥</h2> <p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ MySQL æ•°æ®åº“ï¼Œåœ¨è¿æ¥æ•°æ®åº“ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š</p> <ul class="list"> <li>æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“ TESTDBã€‚</li> <li>æ‚¨å·²ç»åœ¨ TESTDB ä¸­åˆ›å»ºäº†è¡¨ EMPLOYEEã€‚</li> <li>è¯¥è¡¨å¸¦æœ‰å­—æ®µ FIRST_NAMEã€LAST_NAMEã€AGEã€SEX å’Œ INCOMEã€‚</li> <li>è®¾ç½®ç”¨æˆ· ID "testuser" å’Œå¯†ç  "test123" æ¥è®¿é—® TESTDB</li> <li>å·²ç»åœ¨æ‚¨çš„æœºå™¨ä¸Šæ­£ç¡®åœ°å®‰è£…äº† Ruby æ¨¡å— DBIã€‚</li> <li>æ‚¨å·²ç»çœ‹è¿‡ MySQL æ•™ç¨‹ï¼Œç†è§£äº† MySQL åŸºç¡€æ“ä½œã€‚</p> </li> </ul> <p>ä¸‹é¢æ˜¯è¿æ¥ MySQL æ•°æ®åº“ "TESTDB" çš„å®ä¾‹ï¼š</p> <pre class="prettyprint">
#!/usr/bin/ruby -w

require "dbi"

begin
     # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
     dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123")
     # è·å–æœåŠ¡å™¨ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œå¹¶æ˜¾ç¤º
     row = dbh.select_one("SELECT VERSION()")
     puts "Server version: " + row[0]
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <p>å½“è¿è¡Œè¿™æ®µè„šæœ¬æ—¶ï¼Œå°†ä¼šåœ¨ Linux æœºå™¨ä¸Šäº§ç”Ÿä»¥ä¸‹ç»“æœã€‚</p> <pre class="prettyprint">
Server version: 5.0.45
</pre> <p>å¦‚æœå»ºç«‹è¿æ¥æ—¶å¸¦æœ‰æ•°æ®æºï¼Œåˆ™è¿”å›æ•°æ®åº“å¥æŸ„ï¼ˆDatabase Handleï¼‰ï¼Œå¹¶ä¿å­˜åˆ° <b>dbh</b> ä¸­ä»¥ä¾¿åç»­ä½¿ç”¨ï¼Œå¦åˆ™ <b>dbh</b> å°†è¢«è®¾ç½®ä¸º nil å€¼ï¼Œ<i>e.err</i> å’Œ <i>e::errstr</i> åˆ†åˆ«è¿”å›é”™è¯¯ä»£ç å’Œé”™è¯¯å­—ç¬¦ä¸²ã€‚</p> <p>æœ€åï¼Œåœ¨é€€å‡ºè¿™æ®µç¨‹åºä¹‹å‰ï¼Œè¯·ç¡®ä¿å…³é—­æ•°æ®åº“è¿æ¥ï¼Œé‡Šæ”¾èµ„æºã€‚</p> <h2 class="tutheader">INSERT æ“ä½œ</h2> <p>å½“æ‚¨æƒ³è¦åœ¨æ•°æ®åº“è¡¨ä¸­åˆ›å»ºè®°å½•æ—¶ï¼Œéœ€è¦ç”¨åˆ° INSERT æ“ä½œã€‚</p> <p>ä¸€æ—¦å»ºç«‹äº†æ•°æ®åº“è¿æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‡†å¤‡ä½¿ç”¨ <b>do</b> æ–¹æ³•æˆ– <b>prepare</b> å’Œ <b>execute</b> æ–¹æ³•åˆ›å»ºè¡¨æˆ–åˆ›å»ºæ’å…¥æ•°æ®è¡¨ä¸­çš„è®°å½•ã€‚</p> <h2>ä½¿ç”¨ do è¯­å¥</h2> <p>ä¸è¿”å›è¡Œçš„è¯­å¥å¯é€šè¿‡è°ƒç”¨ <b>do</b> æ•°æ®åº“å¤„ç†æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¸¦æœ‰ä¸€ä¸ªè¯­å¥å­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶è¿”å›è¯¥è¯­å¥æ‰€å½±å“çš„è¡Œæ•°ã€‚</p> <pre class="prettyprint">
dbh.do("DROP TABLE IF EXISTS EMPLOYEE")
dbh.do("CREATE TABLE EMPLOYEE (
     FIRST_NAME  CHAR(20) NOT NULL,
     LAST_NAME  CHAR(20),
     AGE INT,  
     SEX CHAR(1),
     INCOME FLOAT )" );
</pre> <p>åŒæ ·åœ°ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œ SQL <i>INSERT</i> è¯­å¥æ¥åˆ›å»ºè®°å½•æ’å…¥ EMPLOYEE è¡¨ä¸­ã€‚</p> <pre class="prettyprint">
#!/usr/bin/ruby -w

require "dbi"

begin
     # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
     dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123")
     dbh.do( "INSERT INTO EMPLOYEE(FIRST_NAME,
                   LAST_NAME, 
                   AGE, 
		   SEX, 
		   INCOME)
          VALUES ('Mac', 'Mohan', 20, 'M', 2000)" )
     puts "Record has been created"
     dbh.commit
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
     dbh.rollback
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <h2>ä½¿ç”¨ <i>prepare</i> å’Œ <i>execute</i></h2> <p>æ‚¨å¯ä»¥ä½¿ç”¨ DBI çš„ <i>prepare</i> å’Œ <i>execute</i> æ–¹æ³•æ¥æ‰§è¡Œ Ruby ä»£ç ä¸­çš„ SQL è¯­å¥ã€‚</p> <p>åˆ›å»ºè®°å½•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ul class="list"> <li>å‡†å¤‡å¸¦æœ‰ INSERT è¯­å¥çš„ SQL è¯­å¥ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>prepare</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œä»æ•°æ®åº“ä¸­é€‰æ‹©æ‰€æœ‰çš„ç»“æœã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>execute</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>é‡Šæ”¾è¯­å¥å¥æŸ„ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>finish</b> API æ¥å®Œæˆã€‚</li> <li>å¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©ï¼Œåˆ™ <b>commit</b> è¯¥æ“ä½œï¼Œå¦åˆ™æ‚¨å¯ä»¥ <b>rollback</b> å®Œæˆäº¤æ˜“ã€‚</li> </ul> <p>ä¸‹é¢æ˜¯ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•çš„è¯­æ³•ï¼š</p> <pre class="prettyprint">
sth = dbh.prepare(statement)
sth.execute
   ... zero or more SQL operations ...
sth.finish
</pre> <p>è¿™ä¸¤ç§æ–¹æ³•å¯ç”¨äºä¼  <b>bind</b> å€¼ç»™ SQL è¯­å¥ã€‚æœ‰æ—¶å€™è¢«è¾“å…¥çš„å€¼å¯èƒ½æœªäº‹å…ˆç»™å‡ºï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ™ä¼šç”¨åˆ°ç»‘å®šå€¼ã€‚ä½¿ç”¨é—®å·ï¼ˆ<b>?</b>ï¼‰æ›¿ä»£å®é™…å€¼ï¼Œå®é™…å€¼é€šè¿‡ execute() API æ¥ä¼ é€’ã€‚</p> <p>ä¸‹é¢çš„å®ä¾‹åœ¨ EMPLOYEE è¡¨ä¸­åˆ›å»ºäº†ä¸¤ä¸ªè®°å½•ï¼š</p> <pre class="prettyprint">
#!/usr/bin/ruby -w

require "dbi"

begin
     # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
     dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123")
     sth = dbh.prepare( "INSERT INTO EMPLOYEE(FIRST_NAME,
                   LAST_NAME, 
                   AGE, 
 		   SEX, 
		   INCOME)
                   VALUES (?, ?, ?, ?, ?)" )
     sth.execute('John', 'Poul', 25, 'M', 2300)
     sth.execute('Zara', 'Ali', 17, 'F', 1000)
     sth.finish
     dbh.commit
     puts "Record has been created"
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
     dbh.rollback
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <p>å¦‚æœåŒæ—¶ä½¿ç”¨å¤šä¸ª INSERTï¼Œé‚£ä¹ˆå…ˆå‡†å¤‡ä¸€ä¸ªè¯­å¥ï¼Œç„¶ååœ¨ä¸€ä¸ªå¾ªç¯ä¸­å¤šæ¬¡æ‰§è¡Œå®ƒè¦æ¯”é€šè¿‡å¾ªç¯æ¯æ¬¡è°ƒç”¨ do æœ‰æ•ˆç‡å¾—å¤šã€‚</p> <h2 class="tutheader">READ æ“ä½œ</h2> <p>å¯¹ä»»ä½•æ•°æ®åº“çš„ READ æ“ä½œæ˜¯æŒ‡ä»æ•°æ®åº“ä¸­è·å–æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p> <p>ä¸€æ—¦å»ºç«‹äº†æ•°æ®åº“è¿æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‡†å¤‡æŸ¥è¯¢æ•°æ®åº“ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <b>do</b> æ–¹æ³•æˆ– <b>prepare</b> å’Œ <b>execute</b> æ–¹æ³•ä»æ•°æ®åº“è¡¨ä¸­è·å–å€¼ã€‚</p> <p>è·å–è®°å½•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ul class="list"> <li>åŸºäºæ‰€éœ€çš„æ¡ä»¶å‡†å¤‡ SQL æŸ¥è¯¢ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>prepare</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œä»æ•°æ®åº“ä¸­é€‰æ‹©æ‰€æœ‰çš„ç»“æœã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>execute</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>é€ä¸€è·å–ç»“æœï¼Œå¹¶è¾“å‡ºè¿™äº›ç»“æœã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>fetch</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>é‡Šæ”¾è¯­å¥å¥æŸ„ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>finish</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> </ul> <p>ä¸‹é¢çš„å®ä¾‹ä» EMPLOYEE è¡¨ä¸­æŸ¥è¯¢æ‰€æœ‰å·¥èµ„ï¼ˆsalaryï¼‰è¶…è¿‡ 1000 çš„è®°å½•ã€‚</p> <pre class="prettyprint">
#!/usr/bin/ruby -w

require "dbi"

begin
     # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
     dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123")
     sth = dbh.prepare("SELECT * FROM EMPLOYEE 
                        WHERE INCOME &gt; ?")
     sth.execute(1000)

     sth.fetch do |row|
        printf "First Name: %s, Last Name : %s\n", row[0], row[1]
        printf "Age: %d, Sex : %s\n", row[2], row[3]
        printf "Salary :%d \n\n", row[4]
     end
     sth.finish
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
First Name: Mac, Last Name : Mohan
Age: 20, Sex : M
Salary :2000

First Name: John, Last Name : Poul
Age: 25, Sex : M
Salary :2300
</pre> <h3>è¿˜æœ‰å¾ˆå¤šä»æ•°æ®åº“è·å–è®°å½•çš„æ–¹æ³•ï¼Œå¦‚æœæ‚¨æ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥çœ‹ <a href="javascript:if(confirm('http://www.w3cschool.cc/ruby/try.php?filename=tryjs_continue  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ²»¿ÉÓÃ, »ò·ÅÆúÁËÏÂÔØ, »òÏîÄ¿¼´½«Í£Ö¹¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.w3cschool.cc/ruby/try.php?filename=tryjs_continue'" tppabs="http://www.w3cschool.cc/ruby/ruby-dbi-read.html" title="Ruby DBI Read æ“ä½œ"><b>Ruby DBI Read æ“ä½œ</b></a>ã€‚</h3> <h2 class="tutheader">Update æ“ä½œ</h2> <p>å¯¹ä»»ä½•æ•°æ®åº“çš„ UPDATE æ“ä½œæ˜¯æŒ‡æ›´æ–°æ•°æ®åº“ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå·²æœ‰çš„è®°å½•ã€‚ä¸‹é¢çš„å®ä¾‹æ›´æ–° SEX ä¸º 'M' çš„æ‰€æœ‰è®°å½•ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰ç”·æ€§çš„ AGE å¢åŠ ä¸€å²ã€‚è¿™å°†åˆ†ä¸ºä¸‰æ­¥ï¼š</p> <ul class="list"> <li>åŸºäºæ‰€éœ€çš„æ¡ä»¶å‡†å¤‡ SQL æŸ¥è¯¢ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>prepare</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œä»æ•°æ®åº“ä¸­é€‰æ‹©æ‰€æœ‰çš„ç»“æœã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>execute</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>é‡Šæ”¾è¯­å¥å¥æŸ„ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>finish</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>å¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©ï¼Œåˆ™ <b>commit</b> è¯¥æ“ä½œï¼Œå¦åˆ™æ‚¨å¯ä»¥ <b>rollback</b> å®Œæˆäº¤æ˜“ã€‚</li> </ul> <pre class="prettyprint">
#!/usr/bin/ruby -w

require "dbi"

begin
     # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
     dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123")
     sth = dbh.prepare("UPDATE EMPLOYEE SET AGE = AGE + 1
                        WHERE SEX = ?")
     sth.execute('M')
     sth.finish
     dbh.commit
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
     dbh.rollback
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <h2 class="tutheader">DELETE æ“ä½œ</h2> <p>å½“æ‚¨æƒ³è¦ä»æ•°æ®åº“ä¸­åˆ é™¤è®°å½•æ—¶ï¼Œéœ€è¦ç”¨åˆ° DELETE æ“ä½œã€‚ä¸‹é¢çš„å®ä¾‹ä» EMPLOYEE ä¸­åˆ é™¤ AGE è¶…è¿‡ 20 çš„æ‰€æœ‰è®°å½•ã€‚è¯¥æ“ä½œçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ul class="list"> <li>åŸºäºæ‰€éœ€çš„æ¡ä»¶å‡†å¤‡ SQL æŸ¥è¯¢ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>prepare</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œä»æ•°æ®åº“ä¸­åˆ é™¤æ‰€éœ€çš„è®°å½•ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>execute</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>é‡Šæ”¾è¯­å¥å¥æŸ„ã€‚è¿™å°†é€šè¿‡ä½¿ç”¨ <b>finish</b> æ–¹æ³•æ¥å®Œæˆã€‚</li> <li>å¦‚æœä¸€åˆ‡è¿›å±•é¡ºåˆ©ï¼Œåˆ™ <b>commit</b> è¯¥æ“ä½œï¼Œå¦åˆ™æ‚¨å¯ä»¥ <b>rollback</b> å®Œæˆäº¤æ˜“ã€‚</li> </ul> <pre class="prettyprint">
#!/usr/bin/ruby -w

require "dbi"

begin
     # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
     dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123")
     sth = dbh.prepare("DELETE FROM EMPLOYEE 
                        WHERE AGE &gt; ?")
     sth.execute(20)
     sth.finish
     dbh.commit
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
     dbh.rollback
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <h2 class="tutheader">æ‰§è¡Œäº‹åŠ¡</h2> <p>äº‹åŠ¡æ˜¯ä¸€ç§ç¡®ä¿äº¤æ˜“ä¸€è‡´æ€§çš„æœºåˆ¶ã€‚äº‹åŠ¡åº”å…·æœ‰ä¸‹åˆ—å››ç§å±æ€§ï¼š</p> <ul class="list"> <li><b>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼š</b>äº‹åŠ¡çš„åŸå­æ€§æŒ‡çš„æ˜¯ï¼Œäº‹åŠ¡ä¸­åŒ…å«çš„ç¨‹åºä½œä¸ºæ•°æ®åº“çš„é€»è¾‘å·¥ä½œå•ä½ï¼Œå®ƒæ‰€åšçš„å¯¹æ•°æ®ä¿®æ”¹æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚</li> <li><b>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼š</b>äº‹åŠ¡çš„ä¸€è‡´æ€§æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åæ•°æ®åº“éƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚å‡å¦‚æ•°æ®åº“çš„çŠ¶æ€æ»¡è¶³æ‰€æœ‰çš„å®Œæ•´æ€§çº¦æŸï¼Œå°±è¯´è¯¥æ•°æ®åº“æ˜¯ä¸€è‡´çš„ã€‚ </li> <li><b>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼š</b>äº‹åŠ¡çš„éš”ç¦»æ€§æŒ‡å¹¶å‘çš„äº‹åŠ¡æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠæ­£åœ¨æ“ä½œçš„æ•°æ®å¿…é¡»å°é”èµ·æ¥ï¼Œä¸è¢«å…¶å®ƒä¼å›¾è¿›è¡Œä¿®æ”¹çš„äº‹åŠ¡çœ‹åˆ°ã€‚</li> <li><b>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼š</b>äº‹åŠ¡çš„æŒä¹…æ€§æ„å‘³ç€å½“ç³»ç»Ÿæˆ–ä»‹è´¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œç¡®ä¿å·²æäº¤äº‹åŠ¡çš„æ›´æ–°ä¸èƒ½ä¸¢å¤±ã€‚å³ä¸€æ—¦ä¸€ä¸ªäº‹åŠ¡æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ï¼Œè€å¾—ä½ä»»ä½•æ•°æ®åº“ç³»ç»Ÿæ•…éšœã€‚æŒä¹…æ€§é€šè¿‡æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤æ¥ä¿è¯ã€‚</li> </ul> <p>DBI æä¾›äº†ä¸¤ç§æ‰§è¡Œäº‹åŠ¡çš„æ–¹æ³•ã€‚ä¸€ç§æ˜¯ <i>commit</i> æˆ– <i>rollback</i> æ–¹æ³•ï¼Œç”¨äºæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚è¿˜æœ‰ä¸€ç§æ˜¯ <i>transaction</i> æ–¹æ³•ï¼Œå¯ç”¨äºå®ç°äº‹åŠ¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç»è¿™ä¸¤ç§ç®€å•çš„å®ç°äº‹åŠ¡çš„æ–¹æ³•ï¼š</p> <h2>æ–¹æ³• I</h2> <p>ç¬¬ä¸€ç§æ–¹æ³•ä½¿ç”¨ DBI çš„ <i>commit</i> å’Œ <i>rollback</i> æ–¹æ³•æ¥æ˜¾å¼åœ°æäº¤æˆ–å–æ¶ˆäº‹åŠ¡ï¼š</p> <pre class="prettyprint">
   dbh['AutoCommit'] = false # è®¾ç½®è‡ªåŠ¨æäº¤ä¸º false.
   begin
     dbh.do("UPDATE EMPLOYEE SET AGE = AGE+1 
             WHERE FIRST_NAME = 'John'")
     dbh.do("UPDATE EMPLOYEE SET AGE = AGE+1 
             WHERE FIRST_NAME = 'Zara'")
     dbh.commit
   rescue
     puts "transaction failed"
     dbh.rollback
   end
   dbh['AutoCommit'] = true
</pre> <h2>æ–¹æ³• II</h2> <p>ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨ <i>transaction</i> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ç›¸å¯¹ç®€å•äº›ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸€ä¸ªåŒ…å«æ„æˆäº‹åŠ¡è¯­å¥çš„ä»£ç å—ã€‚<i>transaction</i> æ–¹æ³•æ‰§è¡Œå—ï¼Œç„¶åæ ¹æ®å—æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œè‡ªåŠ¨è°ƒç”¨ <i>commit</i> æˆ– <i>rollback</i>ï¼š</p> <pre class="prettyprint">
   dbh['AutoCommit'] = false # è®¾ç½®è‡ªåŠ¨æäº¤ä¸º false
   dbh.transaction do |dbh|
     dbh.do("UPDATE EMPLOYEE SET AGE = AGE+1 
             WHERE FIRST_NAME = 'John'")
     dbh.do("UPDATE EMPLOYEE SET AGE = AGE+1 
             WHERE FIRST_NAME = 'Zara'")
   end
   dbh['AutoCommit'] = true
</pre> <h2 class="tutheader">COMMIT æ“ä½œ</h2> <p>Commit æ˜¯ä¸€ç§æ ‡è¯†æ•°æ®åº“å·²å®Œæˆæ›´æ”¹çš„æ“ä½œï¼Œåœ¨è¿™ä¸ªæ“ä½œåï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½ä¸å¯æ¢å¤ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªè°ƒç”¨ <b>commit</b> æ–¹æ³•çš„ç®€å•å®ä¾‹ã€‚</p> <pre class="prettyprint">
     dbh.commit
</pre> <h2 class="tutheader">ROLLBACK æ“ä½œ</h2> <p>å¦‚æœæ‚¨ä¸æ»¡æ„æŸä¸ªæˆ–æŸå‡ ä¸ªæ›´æ”¹ï¼Œæ‚¨æƒ³è¦å®Œå…¨æ¢å¤è¿™äº›æ›´æ”¹ï¼Œåˆ™ä½¿ç”¨ <b>rollback</b> æ–¹æ³•ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªè°ƒç”¨ <b>rollback</b> æ–¹æ³•çš„ç®€å•å®ä¾‹ã€‚</p> <pre class="prettyprint">
     dbh.rollback
</pre> <h2 class="tutheader">æ–­å¼€æ•°æ®åº“</h2> <p>å¦‚éœ€æ–­å¼€æ•°æ®åº“è¿æ¥ï¼Œè¯·ä½¿ç”¨ disconnect APIã€‚</p> <pre class="prettyprint">
    dbh.disconnect
</pre> <p>å¦‚æœç”¨æˆ·é€šè¿‡ disconnect æ–¹æ³•å…³é—­äº†æ•°æ®åº“è¿æ¥ï¼ŒDBI ä¼šå›æ»šæ‰€æœ‰æœªå®Œæˆçš„äº‹åŠ¡ã€‚ä½†æ˜¯ï¼Œä¸éœ€è¦ä¾èµ–äºä»»ä½• DBI çš„å®ç°ç»†èŠ‚ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°±èƒ½å¾ˆå¥½åœ°æ˜¾å¼è°ƒç”¨ commit æˆ– rollbackã€‚</p> <h2 class="tutheader">å¤„ç†é”™è¯¯</h2> <p>æœ‰è®¸å¤šä¸åŒçš„é”™è¯¯æ¥æºã€‚æ¯”å¦‚åœ¨æ‰§è¡Œ SQL è¯­å¥æ—¶çš„è¯­æ³•é”™è¯¯ï¼Œæˆ–è€…æ˜¯è¿æ¥å¤±è´¥ï¼Œåˆæˆ–è€…æ˜¯å¯¹ä¸€ä¸ªå·²ç»å–æ¶ˆçš„æˆ–å®Œæˆçš„è¯­å¥å¥æŸ„è°ƒç”¨ fetch æ–¹æ³•ã€‚</p> <p>å¦‚æœæŸä¸ª DBI æ–¹æ³•å¤±è´¥ï¼ŒDBI ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚DBI æ–¹æ³•ä¼šæŠ›å‡ºä»»ä½•ç±»å‹çš„å¼‚å¸¸ï¼Œä½†æ˜¯æœ€é‡è¦çš„ä¸¤ç§å¼‚å¸¸ç±»æ˜¯ <i>DBI::InterfaceError</i> å’Œ <i>DBI::DatabaseError</i>ã€‚</p> <p>è¿™äº›ç±»çš„ Exception å¯¹è±¡æœ‰ <i>err</i>ã€<i>errstr</i> å’Œ <i>state</i> ä¸‰ç§å±æ€§ï¼Œåˆ†è¡¨ä»£è¡¨äº†é”™è¯¯å·ã€ä¸€ä¸ªæè¿°æ€§çš„é”™è¯¯å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ ‡å‡†çš„é”™è¯¯ä»£ç ã€‚å±æ€§å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š</p> <ul class="list"> <li><b>errï¼š</b>è¿”å›æ‰€å‘ç”Ÿçš„é”™è¯¯çš„æ•´æ•°è¡¨ç¤ºæ³•ï¼Œå¦‚æœ DBD ä¸æ”¯æŒåˆ™è¿”å› <i>nil</i>ã€‚ä¾‹å¦‚ï¼ŒOracle DBD è¿”å› <i>ORA-XXXX</i> é”™è¯¯æ¶ˆæ¯çš„æ•°å­—éƒ¨åˆ†ã€‚</li> <li><b>errstrï¼š</b>è¿”å›æ‰€å‘ç”Ÿçš„é”™è¯¯çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ã€‚</li> <li><b>stateï¼š</b>è¿”å›æ‰€å‘ç”Ÿçš„é”™è¯¯çš„ SQLSTATE ä»£ç ã€‚SQLSTATE æ˜¯äº”å­—ç¬¦é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚å¤§å¤šæ•°çš„ DBD å¹¶ä¸æ”¯æŒå®ƒï¼Œæ‰€ä»¥ä¼šè¿”å› nilã€‚</li> </ul> <p>åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­æ‚¨å·²ç»çœ‹è¿‡ä¸‹é¢çš„ä»£ç ï¼š</p> <pre class="prettyprint">
rescue DBI::DatabaseError =&gt; e
     puts "An error occurred"
     puts "Error code:    #{e.err}"
     puts "Error message: #{e.errstr}"
     dbh.rollback
ensure
     # æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥
     dbh.disconnect if dbh
end
</pre> <p>ä¸ºäº†è·å–è„šæœ¬æ‰§è¡Œæ—¶æœ‰å…³è„šæœ¬æ‰§è¡Œå†…å®¹çš„è°ƒè¯•ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥å¯ç”¨è·Ÿè¸ªã€‚ä¸ºæ­¤ï¼Œæ‚¨å¿…é¡»é¦–å…ˆä¸‹è½½ dbi/trace æ¨¡å—ï¼Œç„¶åè°ƒç”¨æ§åˆ¶è·Ÿè¸ªæ¨¡å¼å’Œè¾“å‡ºç›®çš„åœ°çš„ <i>trace</i> æ–¹æ³•ï¼š</p> <pre class="prettyprint">
require "dbi/trace"
..............

trace(mode, destination)
</pre> <p>mode çš„å€¼å¯ä»¥æ˜¯ 0ï¼ˆoffï¼‰ã€1ã€2 æˆ– 3ï¼Œdestination çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ª IO å¯¹è±¡ã€‚é»˜è®¤å€¼åˆ†åˆ«æ˜¯ 2 å’Œ STDERRã€‚</p> <h2 class="tutheader">æ–¹æ³•çš„ä»£ç å—</h2> <p>æœ‰ä¸€äº›åˆ›å»ºå¥æŸ„çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•é€šè¿‡ä»£ç å—è°ƒç”¨ã€‚ä½¿ç”¨å¸¦æœ‰æ–¹æ³•çš„ä»£ç å—çš„ä¼˜ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸ºä»£ç å—æä¾›äº†å¥æŸ„ä½œä¸ºå‚æ•°ï¼Œå½“å—ç»ˆæ­¢æ—¶ä¼šè‡ªåŠ¨æ¸…é™¤å¥æŸ„ã€‚ä¸‹é¢æ˜¯ä¸€äº›å®ä¾‹ï¼Œæœ‰åŠ©äºç†è§£è¿™ä¸ªæ¦‚å¿µã€‚</p> <ul class="list"> <li><b>DBI.connect ï¼š</b>è¯¥æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ•°æ®åº“å¥æŸ„ï¼Œå»ºè®®åœ¨å—çš„æœ«å°¾è°ƒç”¨ <i>disconnect</i> æ¥æ–­å¼€æ•°æ®åº“ã€‚</li> <li><b>dbh.prepare ï¼š</b>è¯¥æ–¹æ³•ç”Ÿæˆä¸€ä¸ªè¯­å¥å¥æŸ„ï¼Œå»ºè®®åœ¨å—çš„æœ«å°¾è°ƒç”¨ <i>finish</i>ã€‚åœ¨å—å†…ï¼Œæ‚¨å¿…é¡»è°ƒç”¨ <i>execute</i> æ–¹æ³•æ¥æ‰§è¡Œè¯­å¥ã€‚</li> <li><b>dbh.execute ï¼š</b>è¯¥æ–¹æ³•ä¸ dbh.prepare ç±»ä¼¼ï¼Œä½†æ˜¯ dbh.execute ä¸éœ€è¦åœ¨å—å†…è°ƒç”¨ execute æ–¹æ³•ã€‚è¯­å¥å¥æŸ„ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</li> </ul> <h2>å®ä¾‹ 1</h2> <p><b>DBI.connect</b> å¯å¸¦æœ‰ä¸€ä¸ªä»£ç å—ï¼Œå‘å®ƒä¼ é€’æ•°æ®åº“å¥æŸ„ï¼Œä¸”ä¼šåœ¨å—çš„æœ«å°¾è‡ªåŠ¨æ–­å¼€å¥æŸ„ã€‚</p> <pre class="prettyprint">
dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	               "testuser", "test123") do |dbh|
</pre> <h2>å®ä¾‹ 2</h2> <p><b>dbh.prepare</b> å¯å¸¦æœ‰ä¸€ä¸ªä»£ç å—ï¼Œå‘å®ƒä¼ é€’è¯­å¥å¥æŸ„ï¼Œä¸”ä¼šåœ¨å—çš„æœ«å°¾è‡ªåŠ¨è°ƒç”¨ finishã€‚</p> <pre class="prettyprint">
dbh.prepare("SHOW DATABASES") do |sth|
       sth.execute
       puts "Databases: " + sth.fetch_all.join(", ")
end
</pre> <h2>å®ä¾‹ 3</h2> <p><b>dbh.execute</b> å¯å¸¦æœ‰ä¸€ä¸ªä»£ç å—ï¼Œå‘å®ƒä¼ é€’è¯­å¥å¥æŸ„ï¼Œä¸”ä¼šåœ¨å—çš„æœ«å°¾è‡ªåŠ¨è°ƒç”¨ finishã€‚</p> <pre class="prettyprint">
dbh.execute("SHOW DATABASES") do |sth|
   puts "Databases: " + sth.fetch_all.join(", ")
end
</pre> <p>DBI <i>transaction</i> æ–¹æ³•ä¹Ÿå¯å¸¦æœ‰ä¸€ä¸ªä»£ç å—ï¼Œè¿™åœ¨ä¸Šé¢çš„ç« èŠ‚ä¸­å·²ç»è®²è§£è¿‡äº†ã€‚</p> <h2 class="tutheader">ç‰¹å®šé©±åŠ¨ç¨‹åºçš„å‡½æ•°å’Œå±æ€§</h2> <p>DBI è®©æ•°æ®åº“é©±åŠ¨ç¨‹åºæä¾›äº†é¢å¤–çš„ç‰¹å®šæ•°æ®åº“çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯è¢«ç”¨æˆ·é€šè¿‡ä»»ä½• Handle å¯¹è±¡çš„ <i>func</i> æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚</p> <p>ä½¿ç”¨ <b>[]=</b> or <b>[]</b> æ–¹æ³•å¯ä»¥è®¾ç½®æˆ–è·å–ç‰¹å®šé©±åŠ¨ç¨‹åºçš„å±æ€§ã€‚</p> <p>DBD::Mysql å®ç°äº†ä¸‹åˆ—ç‰¹å®šé©±åŠ¨ç¨‹åºçš„å‡½æ•°ï¼š</p> <table class="reference notranslate"> <tr><th style="width:5%">åºå·</th><th>å‡½æ•° & æè¿°</th></tr> <tr><td>1</td><td><b>dbh.func(:createdb, db_name)</b><br/>åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ã€‚</td></tr> <tr><td>2</td><td><b>dbh.func(:dropdb, db_name)</b><br/>åˆ é™¤ä¸€ä¸ªæ•°æ®åº“ã€‚</td></tr> <tr><td>3</td><td><b>dbh.func(:reload)</b><br/>æ‰§è¡Œé‡æ–°åŠ è½½æ“ä½œã€‚</td></tr> <tr><td>4</td><td><b>dbh.func(:shutdown)</b><br/>å…³é—­æœåŠ¡å™¨ã€‚</td></tr> <tr><td>5</td><td><b>dbh.func(:insert_id) => Fixnum</b><br/>è¿”å›è¯¥è¿æ¥çš„æœ€è¿‘ AUTO_INCREMENT å€¼ã€‚</td></tr> <tr><td>6</td><td><b>dbh.func(:client_info) => String</b><br/>æ ¹æ®ç‰ˆæœ¬è¿”å› MySQL å®¢æˆ·ç«¯ä¿¡æ¯ã€‚</td></tr> <tr><td>7</td><td><b>dbh.func(:client_version) => Fixnum </b><br/>æ ¹æ®ç‰ˆæœ¬è¿”å›å®¢æˆ·ç«¯ä¿¡æ¯ã€‚è¿™ä¸ :client_info ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä¼šè¿”å›ä¸€ä¸ª fixnumï¼Œè€Œä¸æ˜¯è¿”å›å­—ç¬¦ä¸²ã€‚</td></tr> <tr><td>8</td><td><b>dbh.func(:host_info) => String</b><br/>è¿”å›ä¸»æœºä¿¡æ¯ã€‚</td></tr> <tr><td>9</td><td><b>dbh.func(:proto_info) => Fixnum</b><br/>è¿”å›ç”¨äºé€šä¿¡çš„åè®®ã€‚</td></tr> <tr><td>10</td><td><b>dbh.func(:server_info) => String </b><br/>æ ¹æ®ç‰ˆæœ¬è¿”å› MySQL æœåŠ¡å™¨ç«¯ä¿¡æ¯ã€‚</td></tr> <tr><td>11</td><td><b>dbh.func(:stat) => Stringb><br/>è¿”å›æ•°æ®åº“çš„å½“å‰çŠ¶æ€ã€‚</td></tr> <tr><td>12</td><td><b>dbh.func(:thread_id) => Fixnum</b><br/>è¿”å›å½“å‰çº¿ç¨‹çš„ IDã€‚</td></tr> </table> <h2>å®ä¾‹</h2> <pre class="prettyprint">
#!/usr/bin/ruby

require "dbi"
begin
   # è¿æ¥åˆ° MySQL æœåŠ¡å™¨
   dbh = DBI.connect("DBI:Mysql:TESTDB:localhost", 
	                    "testuser", "test123") 
   puts dbh.func(:client_info)
   puts dbh.func(:client_version)
   puts dbh.func(:host_info)
   puts dbh.func(:proto_info)
   puts dbh.func(:server_info)
   puts dbh.func(:thread_id)
   puts dbh.func(:stat)
rescue DBI::DatabaseError =&gt; e
   puts "An error occurred"
   puts "Error code:    #{e.err}"
   puts "Error message: #{e.errstr}"
ensure
   dbh.disconnect if dbh
end
</pre> <p>è¿™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p> <pre class="prettyprint">
5.0.45
50045
Localhost via UNIX socket
10
5.0.45
150621
Uptime: 384981  Threads: 1  Questions: 1101078  Slow queries: 4 \
Opens: 324  Flush tables: 1  Open tables: 64  \
Queries per second avg: 2.860
</pre> </div> <div class="chapter"> <div class="prev">&laquo; <a href="ruby-regular-expressions.html" tppabs="http://www.w3cschool.cc/ruby/ruby-regular-expressions.html" rel="prev"> Ruby æ­£åˆ™è¡¨è¾¾å¼</a></div> <div class="next"><a href="javascript:if(confirm('http://www.w3cschool.cc/ruby/try.php?filename=tryjs_continue  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ²»¿ÉÓÃ, »ò·ÅÆúÁËÏÂÔØ, »òÏîÄ¿¼´½«Í£Ö¹¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.w3cschool.cc/ruby/try.php?filename=tryjs_continue'" tppabs="http://www.w3cschool.cc/ruby/ruby-dbi-read.html" rel="next">Ruby DBI Read æ“ä½œ</a> &raquo;</div> </div> </div> <div id="rightcolumn"> <div class="rightad"> <a href="../w3cnote.htm" tppabs="http://www.w3cschool.cc/w3cnote" target="_blank" style="border-top: 2px;"/> <img src="../wp-content/themes/w3cschool.cc/assets/img/logo-2.png" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/logo-2.png"> </a> </div> <div class="rightad"> <h2 style="color:#67ad03">å…³æ³¨å¾®ä¿¡ä¸‹è½½ç¦»çº¿æ‰‹å†Œ</h2> <a href="javascript:if(confirm('http://m.w3cschool.cc/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://m.w3cschool.cc/'" tppabs="http://m.w3cschool.cc/" target="_blank"/> <img src="../wp-content/themes/w3cschool.cc/assets/img/qrcode.jpg" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/qrcode.jpg" width="150" height="150" alt="w3cschoolç§»åŠ¨ç‰ˆ"/> </a> <a target="_blank" href="javascript:if(confirm('http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9'" tppabs="http://shang.qq.com/wpa/qunwpa?idkey=d7c53062c7a2016e4d70fc1baff04ec1c401eb673451b6cc8895751869e715f9"><img border="0" src="../../pub.idqqimg.com/wpa/images/group.png" tppabs="http://pub.idqqimg.com/wpa/images/group.png" alt="w3cschool.ccèœé¸Ÿå®¶æ—" title="w3cschool.ccèœé¸Ÿå®¶æ—"></a> </div> <div class="rightad"> <h2>å‚è€ƒæ‰‹å†Œ</h2> <a href="../tags/html-reference.html" tppabs="http://www.w3cschool.cc/tags/html-reference.html" title="HTML 4">HTML å‚è€ƒæ‰‹å†Œ</a> <a href="../jsref/jsref-tutorial.html" tppabs="http://www.w3cschool.cc/jsref/jsref-tutorial.html" title="CSS å‚è€ƒæ‰‹å†Œ">JS å‚è€ƒæ‰‹å†Œ</a> <a href="../cssref/css-reference.html" tppabs="http://www.w3cschool.cc/cssref/css-reference.html" title="CSS å‚è€ƒæ‰‹å†Œ">CSS å‚è€ƒæ‰‹å†Œ</a> <a href="javascript:if(confirm('http://jsbin.w3cschool.cc/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://jsbin.w3cschool.cc/'" tppabs="http://jsbin.w3cschool.cc/" target="_blank" title="jsonæ ¼å¼å·¥å…·"/>HTML/CSS/JS åœ¨çº¿å·¥å…·</a> <a href="../jsontool.htm" tppabs="http://www.w3cschool.cc/jsontool" target="_blank" title="jsonæ ¼å¼å·¥å…·"/>JSON æ ¼å¼å·¥å…·</a> <a href="../coder-learn-path.htm" tppabs="http://www.w3cschool.cc/coder-learn-path" target="_blank"/>ç¨‹åºçŒ¿å­¦ä¹ è·¯çº¿</a> <a href="../chmproblem.htm" tppabs="http://www.w3cschool.cc/chmproblem" target="_blank"/>æ‰“å¼€CHMæ–‡æ¡£é‡åˆ°é—®é¢˜â€¦â€¦</a> <a href="javascript:if(confirm('http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w'" tppabs="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=ssbDyoOAgfLU3crf09venNHd3w" rel="nofollow" target="_blank" title="é—®é¢˜/æ„è§åé¦ˆ"/>é—®é¢˜/æ„è§åé¦ˆ</a> </div> <div class="wideSkyscraper"> <script async src="../../pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" tppabs="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-5751451760833794" data-ad-slot="4106274865"></ins> <script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script> </div> </div> <div style="clear:both;"></div> <div id="footer"> <br> <hr style="height:2px;"> <div id="footerImg"><a href="../index.htm" tppabs="http://www.w3cschool.cc/"> <img style="border:0" src="../wp-content/themes/w3cschool.cc/assets/img/w3cschoolcc_gray.gif" tppabs="http://www.w3cschool.cc/wp-content/themes/w3cschool.cc/assets/img/w3cschoolcc_gray.gif" alt="W3Cschool.cc"/></a> </div> <div id="footerAbout"> <a href="../w3cnote.htm" tppabs="http://www.w3cschool.cc/w3cnote">W3Cèœé¸Ÿç¬”è®°</a> <a href="../disclaimer.htm" tppabs="http://www.w3cschool.cc/disclaimer">å…è´£å£°æ˜</a> <a href="../aboutus.htm" tppabs="http://www.w3cschool.cc/aboutus">å…³äºæˆ‘ä»¬</a> </ul> </div> <div id="footerText"> æä¾›çš„å†…å®¹ä»…ç”¨äºåŸ¹è®­ã€‚æˆ‘ä»¬ä¸ä¿è¯å†…å®¹çš„æ­£ç¡®æ€§ã€‚é€šè¿‡ä½¿ç”¨æœ¬ç«™å†…å®¹éšä¹‹è€Œæ¥çš„é£é™©ä¸æœ¬ç«™æ— å…³ã€‚å½“ä½¿ç”¨æœ¬ç«™æ—¶ï¼Œä»£è¡¨æ‚¨å·²æ¥å—äº†æœ¬ç«™çš„ä½¿ç”¨æ¡æ¬¾å’Œéšç§æ¡æ¬¾ã€‚ ç‰ˆæƒæ‰€æœ‰ï¼Œä¿ç•™ä¸€åˆ‡æƒåˆ©ã€‚W3CSchool ç®€ä½“ä¸­æ–‡ç‰ˆçš„æ‰€æœ‰å†…å®¹ä»…ä¾›æµ‹è¯•ï¼Œå¯¹ä»»ä½•æ³•å¾‹é—®é¢˜åŠé£é™©ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ </div> </div> </div> </div> <a class="backtop" href="javascript:void"></a> <div style="display:none;"> <script src="../../s11.cnzz.com/stat.php-id=5578006&web_id=5578006" tppabs="http://s11.cnzz.com/stat.php?id=5578006&web_id=5578006" language="JavaScript"></script> </div> <div class="share-box"> <div class="share-box-top">åˆ†äº«åˆ°</div> <div class="share-box-inner"> <div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"> <a class="bds_qzone" title="åˆ†äº«åˆ°QQç©ºé—´" href="#"></a> <a class="bds_tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš" href="#"></a> <a class="bds_tqq" title="åˆ†äº«åˆ°äººäººç½‘" href="#"></a> <a class="bds_baidu" title="ç™¾åº¦æ”¶è—" href="#"></a> <span class="bds_more">æ›´å¤š</span> <a class="shareCount" id="shareCount" href="#" title="ç´¯è®¡åˆ†äº«0æ¬¡">0</a> </div> </div> <div class="share-box-bottom"></div> </div> <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=470751" ></script> <script type="text/javascript" id="bdshell_js"></script> <script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000)
</script> <script>
function NewWindow(text)
{
  win=window.open(text,'','top=0,left=0,width=400,height=350');
}
$(function() { 
	color_flag = false; //é…è‰²æ ‡è®°
	prev_title_flag = false;
	next_title_flag = false;
 	href = window.location.href;
	console.log('href', href);
	$("#leftcolumn").find("a").each(function(){
		if(next_title_flag) {
				return false; //ç»“æŸå¾ªç¯
		} 
		cur_href = $(this).attr("href");
		cur_obj = $(this);
		
		if(href.match(cur_href) != null) {
			
			if(cur_href.indexOf('/') == -1) { //ç¬¬äºŒé‡åˆ¤æ–­
				tmp_url = href.substring(0, href.lastIndexOf('/')+1) + cur_href;
				console.log('tmp_url', tmp_url);
				if(href != tmp_url) return;
			}
			if(!color_flag) {
				$(this).css("font-weight", "bold");
				color_flag = true;
			}
			prev_href = $(this).prev("a").attr("href");
			prev_title = $(this).prev("a").attr("title");
			if(!prev_title) prev_title=$(this).prev("a").text();
			next_href = $(this).next("a").attr("href");
			next_title = $(this).next("a").attr("title");
			if(!next_title) next_title=$(this).next("a").text();
			if(!prev_title_flag) {
				if( prev_title ) {
					$(".prev a").attr("href", prev_href);
					$(".prev a").attr("title", prev_title);
					$(".prev a").text( prev_title);
				} else {
					if(typeof(prev_obj) != 'undefined') {
						prev_href = prev_obj.attr("href");
						prev_title = prev_obj.attr("title");
						if(!prev_title) prev_title=prev_obj.text();
						if(prev_title) {
							$(".prev a").attr("href", prev_href);
							$(".prev a").attr("title", prev_title);
							$(".prev a").text( prev_title);
						}
					}
					
				}
				prev_title_flag = true;
			}
			if(next_title) {
				if($(".next a").attr("href")) {
					$(".next a").attr("href", next_href);
					$(".next a").attr("title", next_title);
					$(".next a").text( next_title);
				} else {
					$(".next").html("<a href=\"" + next_href + "\" rel=\"next\" title=\"" + next_title + "\">" + next_title + "</a> &raquo;");
				}
				
				next_title_flag = true;
				
			}
			console.log(prev_href,prev_title);
			console.log(next_href,next_title);
			//return false; 
		} else {
			prev_obj = cur_obj;
			if(next_title_flag) {
				return false;
			} else {
				if(prev_title_flag) {
					next_href = $(this).attr("href");
					next_title = $(this).attr("title");
					if(!next_title) next_title=$(this).text();
					if(next_title) {
						if($(".next a").attr("href")) {
							$(".next a").attr("href", next_href);
							$(".next a").attr("title", next_title);
							$(".next a").text( next_title);
						} else {
							$(".next").html("<a href=\"" + next_href + "\" rel=\"next\" title=\"" + next_title + "\">" + next_title + "</a> &raquo;");
						}
						next_title_flag = true;
					}
				}
			}
		}
		
  });
  
  	$(window).scroll(function () {
        if($(window).scrollTop()>=100) {
            $(".backtop").fadeIn();
        }else {
        	
        		$(".backtop").fadeOut();
        }
    });
	

	$(".backtop").click(function(event){	
		$('html,body').animate({scrollTop:0}, 500);
		return false;
	});
		
});
var host = window.location.host;
if (/(iPhone|iPad|iPod|iOS|BlackBerry|IEMobile|Android)/i.test(navigator.userAgent)) {

    if(host == 'http://www.w3cschool.cc/ruby/www.w3cschool.cc') {
		href = window.location.href;
		href=href.replace(/www.w3cschool.cc/, "http://www.w3cschool.cc/ruby/m.w3cschool.cc");
		window.location.href=href;
	}
}
</script> </body> </html>